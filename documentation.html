<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<meta name="description" content="Styx static site generator documentation">
<title>Styx manual</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Styx manual</h1>
<div class="details">
<span id="revnumber">version 0.3.0</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_features">1.1. Features</a></li>
<li><a href="#_styx_overview">1.2. Styx Overview</a></li>
</ul>
</li>
<li><a href="#_installation">2. Installation</a></li>
<li><a href="#_quick_start">3. Quick Start</a></li>
<li><a href="#_basics">4. Basics</a>
<ul class="sectlevel2">
<li><a href="#_hello_world">4.1. Hello world!</a></li>
<li><a href="#_structure">4.2. Structure</a></li>
<li><a href="#_site_nix">4.3. site.nix</a></li>
<li><a href="#_configuration">4.4. Configuration</a></li>
</ul>
</li>
<li><a href="#_command_line_interface">5. Command line interface</a>
<ul class="sectlevel2">
<li><a href="#_generic_flags">5.1. Generic flags</a></li>
<li><a href="#_common_flags">5.2. Common flags</a></li>
<li><a href="#_new">5.3. New</a></li>
<li><a href="#_build">5.4. Build</a></li>
<li><a href="#_preview">5.5. Preview</a></li>
<li><a href="#_live">5.6. Live</a></li>
<li><a href="#_serve">5.7. Serve</a></li>
<li><a href="#_deploy">5.8. Deploy</a></li>
</ul>
</li>
<li><a href="#_themes_2">6. Themes</a>
<ul class="sectlevel2">
<li><a href="#_getting_themes">6.1. Getting themes</a></li>
<li><a href="#_structure_2">6.2. Structure</a></li>
<li><a href="#_theme_nix">6.3. theme.nix</a></li>
<li><a href="#_files">6.4. Files</a></li>
<li><a href="#_templates">6.5. Templates</a></li>
<li><a href="#_themes_in_site_nix">6.6. Themes in site.nix</a></li>
<li><a href="#_combining_themes">6.7. Combining Themes</a></li>
</ul>
</li>
<li><a href="#Data">7. Data</a>
<ul class="sectlevel2">
<li><a href="#_creating_data">7.1. Creating data</a></li>
<li><a href="#_importing_data">7.2. Importing data</a></li>
<li><a href="#_formats">7.3. Formats</a></li>
<li><a href="#_metadata">7.4. Metadata</a></li>
<li><a href="#_introduction_2">7.5. Introduction</a></li>
<li><a href="#_multipage_data">7.6. Multipage data</a></li>
<li><a href="#_taxonomies">7.7. Taxonomies</a></li>
</ul>
</li>
<li><a href="#Pages">8. Pages</a>
<ul class="sectlevel2">
<li><a href="#_overview_2">8.1. Overview</a></li>
<li><a href="#_the_page_attribute_set">8.2. The page attribute set</a></li>
<li><a href="#_simple_pages">8.3. Simple pages</a></li>
<li><a href="#_attaching_data_to_a_page">8.4. Attaching data to a page</a></li>
<li><a href="#_bypassing_the_layout">8.5. Bypassing the layout</a></li>
<li><a href="#_split_pages">8.6. Split pages</a></li>
<li><a href="#_multipages">8.7. Multipages</a></li>
<li><a href="#_taxonomy_pages">8.8. Taxonomy pages</a></li>
</ul>
</li>
<li><a href="#_site_generation">9. Site Generation</a>
<ul class="sectlevel2">
<li><a href="#_substitutions">9.1. Substitutions</a></li>
<li><a href="#_special_files_2">9.2. Special files</a></li>
<li><a href="#_hooks">9.3. Hooks</a></li>
</ul>
</li>
<li><a href="#_deployment">10. Deployment</a>
<ul class="sectlevel2">
<li><a href="#_github_pages">10.1. GitHub pages</a></li>
<li><a href="#_other">10.2. Other</a></li>
</ul>
</li>
<li><a href="#_library">11. Library</a>
<ul class="sectlevel2">
<li><a href="#_themes_3">11.1. Themes</a></li>
<li><a href="#_template">11.2. Template</a></li>
<li><a href="#_data_2">11.3. Data</a></li>
<li><a href="#_pages_2">11.4. Pages</a></li>
<li><a href="#_generation">11.5. Generation</a></li>
<li><a href="#_utils">11.6. Utils</a></li>
<li><a href="#_proplist">11.7. Proplist</a></li>
<li><a href="#_nixpkgs">11.8. nixpkgs</a></li>
</ul>
</li>
<li><a href="#_release_notes">Release Notes</a>
<ul class="sectlevel2">
<li><a href="#_styx_0_3_0_2016_10_26">Styx 0.3.0 - 2016/10/26</a></li>
<li><a href="#_styx_0_2_0_2016_10_10">Styx 0.2.0 - 2016/10/10</a></li>
<li><a href="#_styx_0_1_0_2016_10_07">Styx 0.1.0 - 2016/10/07</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Styx is a functional static site generator written in Nix expression language.</p>
</div>
<div class="paragraph">
<p>Styx is aimed to be flexible and easy to customize. It is based on the Nix package manager, so it get many of its advantages: caching system, determinism to name a few.
External applications can be used in Styx in a very easy way without having to install them by using the Nix package manager.</p>
</div>
<div class="paragraph">
<p>Styx was inspired by the <a href="https://github.com/NixOS/nixos-weekly/">NixOS weekly project</a> and the <a href="https://gohugo.io/">Hugo</a> static site generator.</p>
</div>
<div class="sect2">
<h3 id="_features"><a class="anchor" href="#_features"></a>1.1. Features</h3>
<div class="ulist">
<ul>
<li>
<p><a href="#_themes">Themes</a></p>
</li>
<li>
<p><a href="#_deployment">Host your site anywhere</a></p>
</li>
<li>
<p><a href="#Data">Flexible content organization</a></p>
</li>
<li>
<p><a href="#_taxonomies">Taxonomies</a></p>
</li>
<li>
<p><a href="#_formats">Markdown and AsciiDoc support</a></p>
</li>
<li>
<p><a href="#_special_files">Sass/Less css automatic conversion</a></p>
</li>
<li>
<p><a href="#_metadata">Content metadata</a></p>
</li>
<li>
<p><a href="#_multipage_data">Multipages content</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_styx_overview"><a class="anchor" href="#_styx_overview"></a>1.2. Styx Overview</h3>
<div class="paragraph">
<p>Pros:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Uniformity: The same language is used in templates and logic.</p>
</li>
<li>
<p>Caching: Styx benefit of the Nix caching system, so only needed pages are rebuild.</p>
</li>
<li>
<p>Light weight: Styx has very few dependencies.</p>
</li>
<li>
<p>Flexibility: Styx is very flexible and make it is easy to implement new features.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Performance: Some parts of Styx like the markup file conversion can be <strong>quite</strong> slow, this is partly counter-balanced by the caching system, but on a fresh site generation Styx can be magnitudes slower than other static site generators.</p>
</li>
<li>
<p>Semantics: Styx is using the Nix expression language for its logic and templates. The Nix expression language is quite different of usual languages and can need some time to get familiar with.</p>
</li>
<li>
<p>Nix: Styx has only one dependency, the Nix package manager. To use Styx you must install Nix, and depending your platform, that can be challenging. But installing Nix might totally change your views on package management!</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation"><a class="anchor" href="#_installation"></a>2. Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The only requirement to install Styx is the <a href="http://nixos.org/nix/">Nix package manager</a>.
Refer to the <a href="http://nixos.org/nix/manual/#chap-installation">Nix installation instructions</a> to install Nix.</p>
</div>
<div class="paragraph">
<p>It is possible to install Nix with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ nix-env -i https://github.com/styx-static/styx/archive/latest.tar.gz</code></pre>
</div>
</div>
<div class="paragraph">
<p>To only test Styx, it is recommended to use the <code>nix-shell</code> command to start a temporary environment including Styx:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ nix-shell -p $(nix-build https://github.com/styx-static/styx/archive/latest.tar.gz)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quick_start"><a class="anchor" href="#_quick_start"></a>3. Quick Start</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Styx showcase site can be created and locally served with the following set of commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ styx new styx-showcase <i class="conum" data-value="1"></i><b>(1)</b>
$ cd styx-showcase <i class="conum" data-value="2"></i><b>(2)</b>
$ git clone https://github.com/styx-static/styx-theme-showcase.git themes/showcase <i class="conum" data-value="3"></i><b>(3)</b>
$ styx preview --in themes/showcase/example <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Initialize a new styx site in the <code>styx-showcase</code> directory.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Enter the <code>styx-showcase</code> directory.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Download the <code>styx-showcase</code> theme in the <code>themes</code> directory.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Launch a local server to preview the showcase theme example site.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>styx-showcase</code> example site will be accessible at <a href="http://127.0.0.1:8080">http://127.0.0.1:8080</a>. Check the posts as they provide some information about how styx works.</p>
</div>
<div class="paragraph">
<p>The <code>styx-showcase</code> main file, <code>site.nix</code> is quite complex as most of the styx features are used in it. It is recommended to start by reading the <a href="#sitenix">site.nix</a> section to get familiar on how <code>site.nix</code> is structured.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_basics"><a class="anchor" href="#_basics"></a>4. Basics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Styx is using the Nix expression language.
The Nix expression language is a lazy evaluated functional language with unconventional semantics.<br>
It is recommended to read the <a href="http://nixos.org/nix/manual/#ch-expression-language">Nix expression language chapter</a> of the Nix manual to get more familiar with it.</p>
</div>
<div class="sect2">
<h3 id="_hello_world"><a class="anchor" href="#_hello_world"></a>4.1. Hello world!</h3>
<div class="paragraph">
<p>Let&#8217;s look at a very basic example of a styx site.</p>
</div>
<div class="listingblock">
<div class="title">Hello world!</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">{ pkgs ? import &lt;nixpkgs&gt; {} <i class="conum" data-value="1"></i><b>(1)</b>
, styxLib }: <i class="conum" data-value="2"></i><b>(2)</b>

let <i class="conum" data-value="3"></i><b>(3)</b>

  lib = import styxLib pkgs; <i class="conum" data-value="4"></i><b>(4)</b>

  index = { <i class="conum" data-value="5"></i><b>(5)</b>
    layout = template: "&lt;html&gt;&lt;body&gt;${template}&lt;/body&gt;&lt;/html&gt;"; <i class="conum" data-value="6"></i><b>(6)</b>
    template = p: p.content; <i class="conum" data-value="7"></i><b>(7)</b>
    content = "&lt;h1&gt;Hello world!&lt;/h1&gt;"; <i class="conum" data-value="8"></i><b>(8)</b>
    href = "index.html"; <i class="conum" data-value="9"></i><b>(9)</b>
  }; <i class="conum" data-value="10"></i><b>(10)</b>

in <i class="conum" data-value="11"></i><b>(11)</b>
  lib.generateSite { pagesList = [ index ]; } <i class="conum" data-value="12"></i><b>(12)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>site.nix</code> is a function written in the nix language. Nix functions have the <code>{ arg1 ? default, arg2, &#8230;&#8203;, argN }: body</code> pattern.
So this line says that the function take a <code>pkgs</code> argument that defaults to <code>import &lt;nixpkgs&gt; {}</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The function take a second argument, <code>styxLib</code>. This argument must be provided as it has no default. <code>styxLib</code> is the styx library and is automatically passed by the <code>styx</code> command.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>let</code> is a special construction to declare local variables, a <code>let</code> block must finish by a <code>in</code>. <code>let a = 1; b = 2; in a + b</code> is a basic example of using <code>let</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>This declare a <code>lib</code> variable that holds the styx library. <code>import</code> is used to importing a file. <code>styxLib</code> is a function and require <code>pkgs</code> as a parameter.<br>
An easier way to write this would be <code>(import styxLib) pkgs</code>, importing the <code>styxLib</code> and passing <code>pkgs</code> as a parameter.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>This declare an <code>index</code> variable as an attribute set. An attribute set is a basic key-value structure. <code>index</code> will be the only page generated.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>To generate a page, styx requires a few attributes to be set, namely <code>layout</code>, <code>template</code> and <code>href</code>. This line declares the <code>layout</code> attribute that is a function that take the <code>template</code> attribute and return the page source.<br>
<code>template:</code> is different from the first point function head, this function use a simple parameter (Point one was using an attribute set parameter).</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>This declare a <code>template</code> attribute. <code>template</code> is a function that takes the page attribute set, <code>index</code> in this case as a parameter and generate a result that will be passed to the <code>layout</code> function.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>This declare a <code>content</code> attribute. This is not mandatory, and could have been integrated in the <code>template</code> key. But most of styx data fetchers will add a <code>content</code> attribute to the page set containing the fetched content.</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>This declare a <code>href</code> attribute. The <code>href</code> attribute is used to specify the path of the page to be generated.</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>Closing the <code>index</code> page attribute set.</td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td>The <code>in</code> mark the end of the <code>let</code> declaration, this means <code>lib</code> and <code>index</code> will be available in the next expression.</td>
</tr>
<tr>
<td><i class="conum" data-value="12"></i><b>12</b></td>
<td>This generate the site by using the library <code>generateSite</code> function, its parameter is an attribute set with the argument <code>pagesList</code> being a list of the single <code>index</code> page.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Everything is ready, the "Hello world!" site preview can be generated.</p>
</div>
<div class="listingblock">
<div class="title">Generating a preview of the "Hello world!" site</div>
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ styx preview</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>import &lt;nixpkgs&gt; {}</code> is a way to import the system nixpkgs (nix package manager package set). So by default, a styx site will use the system <code>nixpkgs</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Even if this is a simple example, nix language semantics can be confusing. In a nutshell to build a site, <code>generateSite</code> evaluates <code>page.layout (page.template page)</code> and output the result in <code>page.href</code> for every page in <code>pagesList</code>.<br>
That is the reason <code>layout</code>, <code>template</code> and <code>href</code> are required attributes of a page set.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Nix expression language is lazily evaluated, so infinite data structures are not a problem (unless some code try to evaluate them).
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_structure"><a class="anchor" href="#_structure"></a>4.2. Structure</h3>
<div class="paragraph">
<p>In its simplest form, styx just needs a <code>site.nix</code> to generate a site like presented in the <a href="#_hello_world">Hello world!</a> example.</p>
</div>
<div class="paragraph">
<p>But the <code>styx new</code> command will generate a few more files for convenience.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>├── conf.nix <i class="conum" data-value="1"></i><b>(1)</b>
├── readme.md <i class="conum" data-value="2"></i><b>(2)</b>
├── site.nix <i class="conum" data-value="3"></i><b>(3)</b>
├── data/ <i class="conum" data-value="4"></i><b>(4)</b>
└── themes/ <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>conf.nix</code> is the main configuration, see <a href="#_configuration">Configuration</a> for details.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>readme.md</code> provides some basic information about how to start using styx.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>site.nix</code> is the main file for site generation, see <a href="#sitenix">[sitenix]</a> for details.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>data/</code> is an empty directory meant to hold site data.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>themes/</code> is an empty directory meant to hold site themes.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The file structure of styx is totally free and can be changed at will.<br>
It is even possible to change the name of <code>site.nix</code>. In that case the <code>--file</code> flag of the styx command can be used to specify the file name.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_site_nix"><a class="anchor" href="#_site_nix"></a>4.3. site.nix</h3>
<div class="paragraph">
<p>The <code>site.nix</code> used in the <a href="#_hello_world">Hello world!</a> example contains only enough code to generate a single page. It is likely that a <code>site.nix</code> to generate a normal site will contain more informations.</p>
</div>
<div class="paragraph">
<p>The extreme case is the <code>showcase</code> theme example site <code>site.nix</code> that use every feature available.</p>
</div>
<div class="paragraph">
<p>It is best practice to divide <code>site.nix</code> in multiple sections, with each section handling a particular topic.<br>
It is common to use the following sections:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Init</p>
</li>
<li>
<p>Themes</p>
</li>
<li>
<p>Template environments</p>
</li>
<li>
<p>Data</p>
</li>
<li>
<p>Pages</p>
</li>
<li>
<p>Arguments preparation</p>
</li>
<li>
<p><code>generateSite</code></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_site_nix_in_a_nutshell"><a class="anchor" href="#_site_nix_in_a_nutshell"></a>4.3.1. site.nix in a nutshell</h4>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><code>site.nix</code> is a function:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>taking at least the styx library as an argument.</p>
</li>
<li>
<p>returning the <code>generateSite</code> function.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><code>generateSite</code> is a function:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>taking at least the list of pages set to generate as an argument.</p>
</li>
<li>
<p>that evaluate each page set with <code>page.layout (page.template page)</code> and output the result in <code>page.href</code>.</p>
</li>
<li>
<p>returning a generated static site.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Everything that is between the top function head and <code>generateSite</code> is meant to prepare the arguments for <code>generateSite</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_init"><a class="anchor" href="#_init"></a>4.3.2. Init</h4>
<div class="paragraph">
<p>This section is the basic setup of styx, it should not be changed and used as is for most setups.</p>
</div>
<div class="listingblock">
<div class="title">Standard Init section</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">/*-----------------------------------------------------------------------------
   Init

   Initialization of Styx, should not be edited
-----------------------------------------------------------------------------*/

{ pkgs ? import &lt;nixpkgs&gt; {}
, styxLib
, renderDrafts ? false
, siteUrl ? null
, lastChange ? null
}@args:

let lib = import styxLib pkgs;
in with lib;

let

  /* Configuration loading
  */
  conf = let <i class="conum" data-value="1"></i><b>(1)</b>
    conf       = import ./conf.nix;
    themesConf = lib.themes.loadConf { inherit themes themesDir; };
    mergedConf = recursiveUpdate themesConf conf;
  in
    overrideConf mergedConf args;

  /* Site state
  */
  state = { inherit lastChange; };

  /* Load themes templates
  */
  templates = lib.themes.loadTemplates {
    inherit themes defaultEnvironment customEnvironments themesDir;
  };

  /* Load themes static files
  */
  files = lib.themes.loadFiles {
    inherit themes themesDir;
  };</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This loads the <code>conf.nix</code> file and merges it with theme configuration and main function <code>siteUrl</code> argument.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_themes"><a class="anchor" href="#_themes"></a>4.3.3. Themes</h4>
<div class="paragraph">
<p>This section is where used themes are declared. Themes are a central concept in styx and provide ways to manage site assets in a very flexible manner.</p>
</div>
<div class="paragraph">
<p>Themes are detailed in the <a href="#_themes">Themes</a> section.</p>
</div>
<div class="listingblock">
<div class="title">Standard themes section</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">/*-----------------------------------------------------------------------------
   Themes setup

-----------------------------------------------------------------------------*/

  /* Themes location
  */
  themesDir = ./themes; <i class="conum" data-value="1"></i><b>(1)</b>

  /* Themes used
  */
  themes = [ "showcase" ]; <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>themesDir</code> should be set relatively to <code>site.nix</code>, that is the reason <code>themesDir</code> is set it to <code>../..</code> in themes example site.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>themes</code> is a list so it is possible to set multiple themes at the same time. Themes at the beginning of the list have a higher priority.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Styx tries to be as explicit as possible. <code>themes</code> and <code>themesDir</code> are not hardcoded names but just conventions and can be changed if the Init section is updated accordingly.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_template_environments"><a class="anchor" href="#_template_environments"></a>4.3.4. Template environments</h4>
<div class="paragraph">
<p>Template environments control the set of variables available in the templates.</p>
</div>
<div class="paragraph">
<p>There are two types of environment:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Default: The environment used in every template that do not have a custom environment</p>
</li>
<li>
<p>Custom: Custom environment for a specific template</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Normal sites should not require custom environments, but they can become useful in more complex setups.</p>
</div>
<div class="listingblock">
<div class="title">Standard template environments section</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">/*-----------------------------------------------------------------------------
   Template environments

-----------------------------------------------------------------------------*/


  /* Default template environment
  */
  defaultEnvironment = { inherit conf state lib templates data; }; <i class="conum" data-value="1"></i><b>(1)</b>

  /* Custom environments for specific templates
  */
  customEnvironments = {}; <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This declare the default environment thet should feed most of needs.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Custom template environments are detailed in the template section.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>defaultEnvironment</code> refers to not yet declared variables, but it is not a problem as the let block allows to access any variable declared or that will be declared in it.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_data"><a class="anchor" href="#_data"></a>4.3.5. Data</h4>
<div class="paragraph">
<p>The data section is responsible for loading data used in the site.</p>
</div>
<div class="paragraph">
<p>The <a href="#Data">Data</a> section explains in detail how to manage data.</p>
</div>
<div class="listingblock">
<div class="title">Standard data section</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">/*-----------------------------------------------------------------------------
   Data

   This section declares the data used by the site
   the data set is included in the default template environment
-----------------------------------------------------------------------------*/

  data = {
    about  = loadFile { dir = ./pages; file = "about.md"; }; <i class="conum" data-value="1"></i><b>(1)</b>
  };</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Example of loading a markdown file with the <code>loadFile</code> function.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_pages"><a class="anchor" href="#_pages"></a>4.3.6. Pages</h4>
<div class="paragraph">
<p>The pages section is used to declare the pages generated by <code>generateSite</code>.<br>
Even if <code>generateSite</code> expects a page list, it is usually declared as an attribute set for convenience.</p>
</div>
<div class="paragraph">
<p>There are multiple functions available to generate different type of pages, but a page is ultimately an attribute set with at least the <code>layout</code>, <code>template</code> and <code>href</code> attribute defined.</p>
</div>
<div class="paragraph">
<p>The <a href="#Pages">Pages</a> section explains in detail how to create pages.</p>
</div>
<div class="listingblock">
<div class="title">Standard pages section</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">/*-----------------------------------------------------------------------------
   Pages

   This section declares the pages that will be generated
-----------------------------------------------------------------------------*/

  pages = {

    about = {
      href = "about.html";
      template = templates.generic.full;
    } // data.about; <i class="conum" data-value="1"></i><b>(1)</b>

  };</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>//</code> is the operator to merge attribute sets, this merge the <code>data.about</code> set attributes in the <code>pages.about</code> attribute set.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
As many pages tends to use the same layout, the <code>layout</code> attribute is usually set in one go to all templates in the "arguments preparation" section.<br>
Only pages that use a different layout explicitly set it in <code>pages</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_argument_preparation"><a class="anchor" href="#_argument_preparation"></a>4.3.7. Argument preparation</h4>
<div class="paragraph">
<p>This is the last part before generating the site. The only purpose of this section is to prepare the <code>generateSite</code> function arguments.</p>
</div>
<div class="listingblock">
<div class="title">Standard argument preparation section</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">/*-----------------------------------------------------------------------------
   generateSite arguments preparation

-----------------------------------------------------------------------------*/

  pagesList = let
    # converting pages attribute set to a list
    list = pagesToList pages;
    # setting a default layout
    in map (setDefaultLayout templates.layout) list;

  substitutions = {
    siteUrl = conf.siteUrl;
  };</code></pre>
</div>
</div>
<div class="paragraph">
<p>This section just turns the <code>pages</code> attribute set into a list of pages, and set a default <code>layout</code> to pages that did not declare one.</p>
</div>
<div class="paragraph">
<p>The substitution set should be declared in this section.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For details about substitutions see <a href="#_substitutions">Substitutions</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_generatesite"><a class="anchor" href="#_generatesite"></a>4.3.8. generateSite</h4>
<div class="paragraph">
<p>This is the final part and shortest section of <code>site.nix</code>. This section consists in a call to <a href="#lib.generation.generateSite"><code>generateSite</code></a>.</p>
</div>
<div class="listingblock">
<div class="title">Standard generateSite section</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">/*-----------------------------------------------------------------------------
   Site rendering

-----------------------------------------------------------------------------*/

in generateSite { inherit files pagesList substitutions; }</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>files</code> is automatically generated in the init section with the enabled themes.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>inherit</code> is a shorthand for writing sets, <code>{ inherit a; }</code> is equivalent to <code>{ a = a; }</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuration"><a class="anchor" href="#_configuration"></a>4.4. Configuration</h3>
<div class="paragraph">
<p>Styx is configured with the <code>conf.nix</code> file present in the site root directory.</p>
</div>
<div class="paragraph">
<p>This files consists in an attribute set defining configuration options, and custom attributes can be added at will.</p>
</div>
<div class="paragraph">
<p>The main configuration is made through themes via the <code>theme</code> attribute. Every theme defines some set of configuration that can be override in <code>conf.nix</code> <code>theme</code> attribute.</p>
</div>
<div class="paragraph">
<p><code>siteUrl</code> is the only required field, and must not end with a slash.</p>
</div>
<div class="listingblock">
<div class="title">Standard conf.nix</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">{
  # URL of the site, must be set to the url of the domain the site will be deployed
  siteUrl = "http://yourdomain.com";

  # Theme specific settings
  # it is possible to override any of the theme configuration settings in the 'theme' set
  theme = {
    # Changing the theme site.title setting
    site.title = "Styx Site";
  };
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_command_line_interface"><a class="anchor" href="#_command_line_interface"></a>5. Command line interface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Styx provides a command line program <code>styx</code>.</p>
</div>
<div class="sect2">
<h3 id="_generic_flags"><a class="anchor" href="#_generic_flags"></a>5.1. Generic flags</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>styx --help</code></dt>
<dd>
<p>Display the help message.</p>
</dd>
<dt class="hdlist1"><code>styx --version</code></dt>
<dd>
<p>Display the version.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_common_flags"><a class="anchor" href="#_common_flags"></a>5.2. Common flags</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>--in DIR</code></dt>
<dd>
<p>Run the command in <code>DIR</code>.</p>
</dd>
<dt class="hdlist1"><code>--file FILE</code></dt>
<dd>
<p>Use <code>FILE</code> instead of <code>site.nix</code>.</p>
</dd>
<dt class="hdlist1"><code>--drafts</code></dt>
<dd>
<p>Process and render drafts.</p>
</dd>
<dt class="hdlist1"><code>--show-trace</code></dt>
<dd>
<p>Show debug output when styx command fails. (Nix flag)</p>
</dd>
<dt class="hdlist1"><code>--arg NAME VALUE</code></dt>
<dd>
<p>Pass an argument <code>NAME</code> to <code>site.nix</code> main function.</p>
</dd>
<dt class="hdlist1"><code>--argstr NAME VALUE</code></dt>
<dd>
<p>Pass a string argument <code>NAME</code> to <code>site.nix</code> main function.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_new"><a class="anchor" href="#_new"></a>5.3. New</h3>
<div class="paragraph">
<p>The <code>new</code> command is used to create a site or a theme.</p>
</div>
<div class="sect3">
<h4 id="_site"><a class="anchor" href="#_site"></a>5.3.1. Site</h4>
<div class="paragraph">
<p>The <code>new site</code> command is used to create a new Styx site.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>styx new site myblog</code></dt>
<dd>
<p>Create a Styx site in <code>myblog</code> directory in current path.</p>
</dd>
<dt class="hdlist1"><code>styx new site myblog --in /tmp</code></dt>
<dd>
<p>Create a Styx site in <code>/tmp/myblog</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_theme"><a class="anchor" href="#_theme"></a>5.3.2. Theme</h4>
<div class="paragraph">
<p>The <code>new theme</code> command is used to create a new theme.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>styx new theme mytheme --in ./themes</code></dt>
<dd>
<p>Create a theme skeleton in <code>themes/mytheme</code>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_build"><a class="anchor" href="#_build"></a>5.4. Build</h3>
<div class="paragraph">
<p>The <code>build</code> command is used to build a Styx site. It must be used in a Styx site root file.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>styx build</code></dt>
<dd>
<p>Build the Styx site and write the output in the <code>public</code> directory.</p>
</dd>
<dt class="hdlist1"><code>styx build --output DIR</code></dt>
<dd>
<p>Build the nix site and write the output in the <code>DIR</code> directory.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>nix-build</code> <code>--show-trace</code>, <code>--arg NAME VALUE</code> and <code>--argstr NAME VALUE</code> flags can be used with the <code>build</code> command.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_preview"><a class="anchor" href="#_preview"></a>5.5. Preview</h3>
<div class="paragraph">
<p>The <code>preview</code> command is used to launch a server that will list on localhost (127.0.0.1) port 8080 by default. The preview command will override <code>conf.siteUrl</code> to preserve links.</p>
</div>
<div class="paragraph">
<p>The server can be stopped by pressing <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>C</kbd></span>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>styx preview</code></dt>
<dd>
<p>Start a preview server on 127.0.0.1:8080.</p>
</dd>
<dt class="hdlist1"><code>styx preview --port 9090</code></dt>
<dd>
<p>Start a preview server on 127.0.0.1:9090.</p>
</dd>
<dt class="hdlist1"><code>styx preview --port 9090 --drafts</code></dt>
<dd>
<p>Start a preview server on 127.0.0.1:9090 with drafts rendered.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Drafts are rendered only if the related logic is present in <code>site.nix</code>. The <code>--drafts</code> flag just make styx pass <code>renderDrafts</code> as <code>true</code> to <code>site.nix</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_live"><a class="anchor" href="#_live"></a>5.6. Live</h3>
<div class="paragraph">
<p>The <code>live</code> is similar to preview, with the unique difference that site is automatically rebuilt when a change is made.</p>
</div>
<div class="paragraph">
<p>The live mode should be quitted by pressing <kbd>q</kbd>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>styx live</code></dt>
<dd>
<p>Start a live preview server on 127.0.0.1:8080.</p>
</dd>
<dt class="hdlist1"><code>styx preview --port 9090</code></dt>
<dd>
<p>Start a live preview server on 127.0.0.1:9090.</p>
</dd>
<dt class="hdlist1"><code>styx preview --port 9090 --drafts</code></dt>
<dd>
<p>Start a live preview server on 127.0.0.1:9090 with drafts rendered.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>live</code> mode does not automatically reload the browser.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If the live mode is not quitted by pressing <kbd>q</kbd>, there is a possibility that the server process will stay alive in background. The server process can be found by running <code>ps aux | grep caddy</code> and killed with the <code>kill</code> command.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_serve"><a class="anchor" href="#_serve"></a>5.7. Serve</h3>
<div class="paragraph">
<p>The <code>serve</code> command is used to build a site and launch a local server. This allow to check the site without having to deploying it.
The server can be stopped by pressing <span class="keyseq"><kbd>Ctrl</kbd>+<kbd>C</kbd></span>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>styx serve</code></dt>
<dd>
<p>Will serve on the localhost on port <code>8080</code>.</p>
</dd>
<dt class="hdlist1"><code>styx-serve --port 9090</code></dt>
<dd>
<p>Will serve on the port <code>9090</code>.</p>
</dd>
<dt class="hdlist1"><code>styx serve --detach</code></dt>
<dd>
<p>Will serve on the localhost on port <code>8080</code> and run the server on background, process can be found by running <code>ps aux | grep caddy</code>.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>nix-build</code> <code>--show-trace</code>, <code>--arg NAME VALUE</code> and <code>--argstr NAME VALUE</code> flags can be used with the <code>serve</code> command.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Styx use the <a href="https://caddyserver.com/">caddy server</a>, even if it is performant server, <code>styx serve</code> launchs it without any special settings.<br>
For production environments it is recommended to use a carefully configured server over <code>styx serve</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_deploy"><a class="anchor" href="#_deploy"></a>5.8. Deploy</h3>
<div class="paragraph">
<p>The <code>deploy</code> command is used to deploy A styx site on a remote server.
Currently only GitHub pages are supported.</p>
</div>
<div class="paragraph">
<p>For more details see the <a href="#_deployment">Deployment</a> section.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>styx deploy --init&#8212;&#8203;gh-pages</code></dt>
<dd>
<p>Prepare a git repository to be able to deploy on GitHub pages.</p>
</dd>
<dt class="hdlist1"><code>styx deploy --gh-pages</code></dt>
<dd>
<p>Commit the Styx site to the <code>gh-pages</code> branch.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_themes_2"><a class="anchor" href="#_themes_2"></a>6. Themes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Themes are a central concept in styx and are used to manage a site assets, namely files and templates.
They also provide a configuration interface.</p>
</div>
<div class="paragraph">
<p>Themes also can be combined to offer modularity and easiness of upgrade.</p>
</div>
<div class="sect2">
<h3 id="_getting_themes"><a class="anchor" href="#_getting_themes"></a>6.1. Getting themes</h3>
<div class="paragraph">
<p>Styx themes are all listed in the official <a href="https://github.com/styx-static/themes">theme repository</a>.</p>
</div>
<div class="paragraph">
<p>Themes available at the moment of writing this documentation are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/styx-static/styx-theme-showcase">Showcase</a>: A theme that show most of styx functionalities and provides many templates.</p>
</li>
<li>
<p><a href="https://github.com/styx-static/styx-theme-hyde">Hyde</a>: A port of the <a href="https://github.com/poole/hyde">Jekyll Hyde theme</a> to styx. Hyde is a simple and beautiful blog theme.</p>
</li>
<li>
<p><a href="https://github.com/styx-static/styx-theme-agency">Agency</a>: A port of the <a href="http://themes.gohugo.io/agency/">Hugo agency theme</a> to styx. Agency is a single page site with a modern design fitting company or agency websites.</p>
</li>
<li>
<p><a href="https://github.com/styx-static/styx-theme-orbit">Orbit</a>: A port of the <a href="http://themes.gohugo.io/orbit/">Hugo orbit theme</a> to styx. Orbit is a single page site resume / profile theme.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Themes should be installed in the <code>themes</code> directory. Using <code>git</code> is the recommended way.</p>
</div>
<div class="listingblock">
<div class="title">Installing the showcase theme via git</div>
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ git clone https://github.com/styx-static/styx-theme-showcase.git themes/showcase</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Installing all themes</div>
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ git clone --depth 1 --recursive https://github.com/styx-static/themes.git themes</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_structure_2"><a class="anchor" href="#_structure_2"></a>6.2. Structure</h3>
<div class="paragraph">
<p>Themes are usually stored in the <code>themes</code> directory, but this can be changed in <code>site.nix</code>.</p>
</div>
<div class="paragraph">
<p>Every theme is stored in its own directory, and themes are expected to follow a certain structure.</p>
</div>
<div class="listingblock">
<div class="title">Anatomy of a Styx theme</div>
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">themes
└── NAME <i class="conum" data-value="1"></i><b>(1)</b>
    ├── theme.nix <i class="conum" data-value="2"></i><b>(2)</b>
    ├── files <i class="conum" data-value="3"></i><b>(3)</b>
    └── templates <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Name of the theme. The name should be a valid directory name.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>theme.nix</code> defines the theme configuration options, this is file is required and must be named <code>theme.nix</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>files</code> is a directory holding static files for the themes. All the files in this directory will be copied in the generated site.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>templates</code> is a directory storing all the templates files.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Themes structure is one of the few part using implicit settings in styx.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_theme_nix"><a class="anchor" href="#_theme_nix"></a>6.3. theme.nix</h3>
<div class="paragraph">
<p><code>theme.nix</code> defines the theme configuration interface. It is defined as an attribute set.</p>
</div>
<div class="paragraph">
<p>It is a simple attribute set that defines the theme configuration options with some default values.</p>
</div>
<div class="listingblock">
<div class="title">Example of a theme.nix</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">{
  site = {
    title = "The Agency";
    author = "Your name";
    description = "Your description";
  };
}</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><code>theme.nix</code> attribute set will be merged in <code>site.nix</code> <code>conf</code> variable in two attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>conf.theme</code>: The global theme configuration, all the enabled themes configuration will be merged in this variable. This allow to extend theme configuration in <code>conf.nix</code>.
Templates that access themes configuration should use <code>conf.theme</code>.</p>
</li>
<li>
<p><code>conf.themes.NAME</code>: <code>NAME</code> is the theme name, this holds the theme default configuration as it is declared in <code>theme.nix</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_files"><a class="anchor" href="#_files"></a>6.4. Files</h3>
<div class="paragraph">
<p>The <code>files</code> directory holds the static files of the theme. Every file in in this directory will be copied in the generated site.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If multiple themes are enabled, every theme <code>file</code> directory contents will be copied to the generated site.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_special_files"><a class="anchor" href="#_special_files"></a>6.4.1. Special files</h4>
<div class="paragraph">
<p>Styx automatically convert <code>sass</code>, <code>scss</code> and <code>less</code> files to css during site generation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_templates"><a class="anchor" href="#_templates"></a>6.5. Templates</h3>
<div class="paragraph">
<p>Every template in the <code>templates</code> will be accessible by its file basename in the <code>templates</code> attribute set.
Directories are converted to nested sets.</p>
</div>
<div class="listingblock">
<div class="title">Example of a template directory structure</div>
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">├── archive.nix
└── post
    ├── full.nix
    └── list.nix</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Generated attribute set</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">templates = {
  archive = &lt;&lt;lambda&gt;&gt;;
  posts = {
    full = &lt;&lt;lambda&gt;&gt;;
    list = &lt;&lt;lambda&gt;&gt;;
  };
};</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
the <code>&lt;&lt;lambda&gt;&gt;</code> notation is borrowed from the <code>nix-repl</code> tool, and means a non fully evaluated function.<br>
The nix language is functional, and it allows to partially apply functions and to pass function as argument to other functions.
</td>
</tr>
</table>
</div>
<hr>
<div class="paragraph">
<p>Styx templates are functions that return text or page attribute sets when fully evaluated.</p>
</div>
<div class="paragraph">
<p>Templates are divided in three types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Layout templates, responsible for the final rendering of a page, it must return text. (page attribute set <code>layout</code> key)</p>
</li>
<li>
<p>Normal templates, responsible for preparing a page for the layout template, this kind of templates usually return a page attribute set.</p>
</li>
<li>
<p>Partial templates, responsible for rendering a part of a layout or a normal template.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The normal template evaluation flow is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The normal template evaluate the page attribute set and generates a partial result that is stored in the page attribute set <code>content</code> key.</p>
</li>
<li>
<p>The layout template evaluate the page attribute set returned by the partial template and produce the final source of the page.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_text_handling_basics"><a class="anchor" href="#_text_handling_basics"></a>6.5.1. Text handling basics</h4>
<div class="paragraph">
<p>Most of the work in template is done by manipulating text.</p>
</div>
<div class="paragraph">
<p>This introduce the basics of text handling in the templates:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>single-line or multi-line text (leading spaces are stripped without changing relative line align), delimited by <code>''</code>.</p>
<div class="listingblock">
<div class="title">Multi-line text</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">''
  Hello world!
  Hello Styx!
''</code></pre>
</div>
</div>
</li>
<li>
<p>single-line or multi-line text, delimited by <code>"</code>.</p>
<div class="listingblock">
<div class="title">Single-line text</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">"Hello world!"</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Nix expressions can be included in text in enclosed in <code>${&#8230;&#8203;}</code>.</p>
</div>
<div class="listingblock">
<div class="title">Expression antiquotation</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">let name = "world"; in
"Hello ${name}!"</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_layout_templates"><a class="anchor" href="#_layout_templates"></a>6.5.2. Layout templates</h4>
<div class="paragraph">
<p>The layout template is responsible for rendering the final source of the page.<br>
The layout template function usually takes a template environment, and a page attribute set with a <code>content</code> attribute.</p>
</div>
<div class="paragraph">
<p>In a HTML context, the layout template is usually responsible of the HTML code that is not directly related to the content, like the <code>head</code> tag contents.</p>
</div>
<div class="listingblock">
<div class="title">Layout template example</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">env:
page:
''
  &lt;html&gt;
    ...
  &lt;body&gt;
    ...
    ${page.content}
    ...
  &lt;/body&gt;
  &lt;/html&gt;
''</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Layout templates are just functions, in case the partial template return the full page source like in a rss feed case, it is possible to set the page <code>layout</code> to the <code>id</code> function. This will make the layout evaluation transparent and return the <code>template</code> result.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_normal_templates"><a class="anchor" href="#_normal_templates"></a>6.5.3. Normal templates</h4>
<div class="paragraph">
<p>Normal templates are similar to the layout templates, with the only difference that their result will be evaluated by the layout template.
A normal template should set or update the <code>content</code> attribute of a page attribute set so the layout template can produce the final source.</p>
</div>
<div class="paragraph">
<p>Normal templates can also add other attributes to the page attribute to fit any special need.</p>
</div>
<div class="listingblock">
<div class="title">Example of a partial template</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">{ templates, ... }:
page:
let
  content =
    ''
      &lt;h1&gt;${page.title}&lt;/h1&gt;
    '';
in
  page // { inherit content; }</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In some cases, it is useful to have the partial template to return the final source of the page.<br>
By setting the page <code>layout</code> to the <code>id</code> function, it is possible to bypass the layout template and have the partial template result being the final source source of the page.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_partial_templates"><a class="anchor" href="#_partial_templates"></a>6.5.4. Partial templates</h4>
<div class="paragraph">
<p>Partials templates are template that that are used in normal or layout templates.</p>
</div>
<div class="paragraph">
<p>Partial templates can take arguments and be used to with <code>mapTemplate</code> to apply a template to a list of content, or just used as includes.</p>
</div>
</div>
<div class="sect3">
<h4 id="_template_environment"><a class="anchor" href="#_template_environment"></a>6.5.5. Template environment</h4>
<div class="paragraph">
<p>The template environment is the first parameter to every template function.</p>
</div>
<div class="paragraph">
<p>It is automatically set when the templates are loaded from a theme.</p>
</div>
<div class="paragraph">
<p>The default template environment consists in:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>conf</code>: The configuration attribute set.</p>
</li>
<li>
<p><code>lib</code>: The library attribute set, it contains Styx and nixpkgs functions.</p>
</li>
<li>
<p><code>state</code>: The state attribute set, by default it only holds the timestamp of the generation.</p>
</li>
<li>
<p><code>templates</code>: The templates attribute set.</p>
</li>
<li>
<p><code>data</code>: The data attribute set.</p>
</li>
<li>
<p><code>pages</code>: The pages attribute set.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The template environment is set in <code>site.nix</code> and can be easily changed.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It is possible to set a specific template environment to a specific template by declaring it in the <code>customTemplateEnvironments</code> set.</p>
</div>
<div class="listingblock">
<div class="title">Setting custom template environments</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">  customEnvironments = {
    layout = defaultEnvironment // { foo = "bar"; }; <i class="conum" data-value="1"></i><b>(1)</b>
  };</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The environment passed to the <code>layout</code> template is the default environment extended with a <code>foo</code> variable.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_template_environment_in_templates"><a class="anchor" href="#_template_environment_in_templates"></a>6.5.6. Template environment in templates</h4>
<div class="paragraph">
<p>There are two ways of writing the <code>environment</code> in the template, as a set or as a deconstructed set.</p>
</div>
<div class="listingblock">
<div class="title">Environment as a variable</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">environment: <i class="conum" data-value="1"></i><b>(1)</b>
page:
''
  ${environment.conf.siteTitle}
''</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>environment</code> is used as a set, and its key can be accessed with <code>.</code>.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Environment as a deconstructed set</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">{ conf, lib, ... }: <i class="conum" data-value="1"></i><b>(1)</b>
page: <i class="conum" data-value="1"></i><b>(1)</b>
''
  ${conf.siteTitle}
''</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>environment is deconstructed in its keys values. The last <code>&#8230;&#8203;</code> means all others keys and is required if the set contains more keys than the keys deconstructed.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_calling_templates_in_templates"><a class="anchor" href="#_calling_templates_in_templates"></a>6.5.7. Calling templates in templates</h4>
<div class="paragraph">
<p>It is possible to call templates in a template by accessing to the <code>templates</code> attribute of the template environment.</p>
</div>
<div class="listingblock">
<div class="title">Calling a template in a template</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">{ templates, ... }:
page:
''
  ${templates.foo}
''</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When templates are loaded, they will automatically receive the template environment as a parameter, this will partially evaluate the template function. This means that the template function will be become a single argument function (<code>page</code>).
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Trying to call the current template will trigger an infinite loop and make the site generation fail.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_applying_templates_to_multiple_contents"><a class="anchor" href="#_applying_templates_to_multiple_contents"></a>6.5.8. Applying templates to multiple contents</h4>
<div class="paragraph">
<p>The <code>mapTemplate</code> function can be used to map a template to a list of contents.</p>
</div>
<div class="listingblock">
<div class="title">Applying a template to multiple contents</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">{ templates, ... }:
page:
''
  ${mapTemplate templates.post.list page.posts}
''</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_themes_in_site_nix"><a class="anchor" href="#_themes_in_site_nix"></a>6.6. Themes in site.nix</h3>
<div class="paragraph">
<p>Themes are declared as a list in the <code>themes</code> variable.</p>
</div>
<div class="listingblock">
<div class="title">Declaring used themes</div>
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">  themes = [ "default" ]; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>themes</code> variable is a list of theme names, it is possible to set multiple themes. In that cases, themes at the head of the list have a higher priority.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Themes related files are automatically loaded in <code>site.nix</code> via the <code>lib.themes.loadTemplates</code> and <code>lib.themes.loadFiles</code> functions.</p>
</div>
<div class="listingblock">
<div class="title">Loading theme related files</div>
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">  templates = lib.themes.loadTemplates { <i class="conum" data-value="1"></i><b>(1)</b>
    inherit themes defaultEnvironment customEnvironments;
    themesDir = conf.themesDir;
  };

  files = lib.themes.loadFiles { <i class="conum" data-value="2"></i><b>(2)</b>
    inherit themes;
    themesDir = conf.themesDir;
  };

  themes = [ "default" ];</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Load themes templates. See <a href="#themes.loadFiles">loadFiles</a> for details.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Load themes files. See <a href="#themes.loadTemplates">loadTemplates</a> for details.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_combining_themes"><a class="anchor" href="#_combining_themes"></a>6.7. Combining Themes</h3>
<div class="paragraph">
<p>In <code>site.nix</code>, themes are declared as a list. If multiple themes in the list provide the same file or template, the one from the first theme to declare it will be used.</p>
</div>
<div class="paragraph">
<p>This allows to "extends" themes without modifying them.</p>
</div>
<div class="paragraph">
<p>For example, to use the showcase theme but only change the <code>layout</code> template. It is possible to create a new theme, and copy the <code>layout.nix</code> template in the new theme <code>templates</code> directory and change only this file.</p>
</div>
<div class="listingblock">
<div class="title">Creating a new foo theme</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ styx new theme --in themes <i class="conum" data-value="1"></i><b>(1)</b>
$ cp themes/{showcase,foo}/templates/layout.nix <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Create the theme directory.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Copying <code>showcase</code> theme <code>layout.nix</code> to <code>foo</code> theme.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>After a new theme has been created, it must be declared in <code>site.nix</code> to be used.</p>
</div>
<div class="listingblock">
<div class="title">Using foo and default themes in <code>site.nix</code></div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">  themes = [ "foo" "showcase" ]; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Using foo and showcase theme, with foo having a higher priority than default.</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Combining themes is the recommended way to extend an existing theme as it make theme upgrades easier.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Data"><a class="anchor" href="#Data"></a>7. Data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Data refers to the data fetched or declared in the data section of <code>site.nix</code>.</p>
</div>
<div class="paragraph">
<p>Data gets included in the default template environment and can also be used in the pages section of <code>site.nix</code> to attach data to pages.</p>
</div>
<div class="sect2">
<h3 id="_creating_data"><a class="anchor" href="#_creating_data"></a>7.1. Creating data</h3>
<div class="paragraph">
<p>Data can be created by directly defining a nix data structure.<br>
An example of such usage is the navbar items that are declared as a list of attributes sets.</p>
</div>
<div class="listingblock">
<div class="title">Creating navbar data</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">  data.navbar = [ pages.about pages.contact ];</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_importing_data"><a class="anchor" href="#_importing_data"></a>7.2. Importing data</h3>
<div class="paragraph">
<p>The styx data sub-library provides functions two functions to import  markup data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>loadFile</code>: load a single data file and return it as an attribute set.</p>
</li>
<li>
<p><code>loadDir</code>: to load all the files in a directory and return them as a list of attributes set.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The data loading functions return a set per file loaded and do a few things:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>fileData</code> field is added that contains the file data as an attribute set with the following keys:</p>
<div class="ulist">
<ul>
<li>
<p><code>basename</code>: The base name of the file.</p>
</li>
<li>
<p><code>ext</code>: The extension of the file.</p>
</li>
<li>
<p><code>dir</code>: The directory of the file.</p>
</li>
<li>
<p><code>name</code>: The name of the file, <code>basename</code> and <code>ext</code> field combined with a <code>.</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Metadada is automatically parsed and merged to the set.</p>
</li>
<li>
<p>Data with introduction gain a <code>intro</code> attribute containing the introduction.</p>
</li>
<li>
<p>Multipages data gain a <code>subpages</code> attribute, a list containing each page content.</p>
</li>
<li>
<p>Converted markup is inserted in a <code>content</code> attribute.</p>
</li>
<li>
<p>If the file basename begins in a <code>YYYY-MM-DD</code> format, this value will be inserted in a <code>date</code> attribute.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Nix data should be imported with the <code>import</code> function, that return the data in the nix file as it is.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_formats"><a class="anchor" href="#_formats"></a>7.3. Formats</h3>
<div class="paragraph">
<p>This section present the data file formats supported by styx.</p>
</div>
<div class="sect3">
<h4 id="_asciidoc"><a class="anchor" href="#_asciidoc"></a>7.3.1. Asciidoc</h4>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/AsciiDoc">AsciiDoc</a> is a simple but complete markup language.</p>
</div>
<div class="paragraph">
<p>It is the format of choice for complex posts or pages as it has more functionalities than markdown.</p>
</div>
<div class="listingblock">
<div class="title">AsciiDoc example</div>
<div class="content">
<pre class="highlight"><code class="language-asciidoc" data-lang="asciidoc">= Lorem ipsum

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean dapibus aliquet justo ac lacinia.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The converted html will be in the <code>content</code> attribute of the data attribute set.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
It is possible to add extra data to an asciidoc file by using <a href="#_metadata">Metadata</a>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<a href="http://asciidoctor.org/">Asciidoctor</a> is used to convert asciidoc.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_markdown"><a class="anchor" href="#_markdown"></a>7.3.2. Markdown</h4>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/Markdown">Markdown</a> is a lightweight markup language.</p>
</div>
<div class="paragraph">
<p>It is the format of choice for posts or pages as it allows to write content in a simple manner.</p>
</div>
<div class="listingblock">
<div class="title">Markdown example</div>
<div class="content">
<pre class="highlight"><code class="language-markdown" data-lang="markdown"># Lorem ipsum

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean dapibus aliquet justo ac lacinia.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The converted html will be in the <code>content</code> attribute of the data attribute set.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
It is possible to add extra data to a markdown file by using <a href="#_metadata">Metadata</a>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<a href="http://fletcherpenney.net/multimarkdown/">MultiMarkdown</a> is used to convert markdown.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_nix"><a class="anchor" href="#_nix"></a>7.3.3. Nix</h4>
<div class="paragraph">
<p>Nix expression language is the language used in <code>site.nix</code> and in every template.</p>
</div>
<div class="paragraph">
<p>It is a simple functional language and fits well data that has multiple fields.</p>
</div>
<div class="listingblock">
<div class="title">Nix data</div>
<div class="content">
<pre class="highlight"><code class="language-markdown" data-lang="markdown">[
  { name = "Alice"; interests = [ "science" "writing" ]; }
  { name = "Bob";   interests = [ "sports" "reading" ]; }
]</code></pre>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Markup with metadata and nix data structures can be considered equivalent as it is possible to declare fields in nix data as markdown text, and markdown can declare nix fields as metadata.</p>
</div>
<div class="paragraph">
<p>Which one to choose is really a matter of choice but:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Nix is well suited for complex data structures with multiple fields.</p>
</li>
<li>
<p>Markup is well suited do content centric data.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_metadata"><a class="anchor" href="#_metadata"></a>7.4. Metadata</h3>
<div class="paragraph">
<p>Metadata is the way to attach Nix data to markup files.</p>
</div>
<div class="paragraph">
<p>A metadata block is a Nix attribute set which opening is <code>{---</code> and closing <code>---}</code>.<br></p>
</div>
<div class="listingblock">
<div class="title">Adding metadata to a markdown file</div>
<div class="content">
<pre class="highlight"><code class="language-markdown" data-lang="markdown">{---
date = "2016-10-10";
tags = [ "foo" "bar" ];
---}

# Lorem ipsum

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean dapibus aliquet justo ac lacinia.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Metadata attributes will automatically be added to the data attribute set.</p>
</div>
</div>
<div class="sect2">
<h3 id="_introduction_2"><a class="anchor" href="#_introduction_2"></a>7.5. Introduction</h3>
<div class="paragraph">
<p>It is possible to declare a section on an imported markup file as the introduction.</p>
</div>
<div class="paragraph">
<p>Introduction and main contents are separated by <code>&gt;&gt;&gt;</code>, content prior the separator will be inserted in the <code>intro</code> attribute.<br></p>
</div>
<div class="listingblock">
<div class="title">Adding an introduction to a markdown file</div>
<div class="content">
<pre class="highlight"><code class="language-markdown" data-lang="markdown">Lorem ipsum dolor sit amet, consectetur adipiscing elit.

&gt;&gt;&gt;

# Lorem ipsum

Mauris quis dolor nec est accumsan dictum eu ut nulla. Sed ut tempus quam, vel bibendum lacus. Nulla vestibulum velit sed ipsum tincidunt maximus.</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>intro</code> field contents are included in the <code>content</code> field.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_multipage_data"><a class="anchor" href="#_multipage_data"></a>7.6. Multipage data</h3>
<div class="paragraph">
<p>It is possible to split markup file in many subpages by using the <code>&lt;&lt;&lt;</code> separator.</p>
</div>
<div class="listingblock">
<div class="title">Splitting a markdown file in 3 pages</div>
<div class="content">
<pre class="highlight"><code class="language-markdown" data-lang="markdown"># Lorem ipsum

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean dapibus aliquet justo ac lacinia.

&lt;&lt;&lt;

# Cras malesuada metus

Cras malesuada metus quis mi pulvinar faucibus. Vivamus suscipit est ante, ut auctor tortor semper nec.

&lt;&lt;&lt;

# Phasellus consequat

Phasellus consequat a nibh sit amet ultricies. Quisque feugiat justo eu condimentum convallis.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The resulting data set will have an extra <code>subpages</code> field that will hold the list of subpages content.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The data section is only responsible for generating the data attribute set. Transforming the data attribute sets in a page attribute sets is handled by the pages section.<br>
For example, the <code>mkPagesList</code> or <code>mkMultipages</code> function can generate pages from a multipage data set.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_taxonomies"><a class="anchor" href="#_taxonomies"></a>7.7. Taxonomies</h3>
<div class="sect3">
<h4 id="_overview"><a class="anchor" href="#_overview"></a>7.7.1. Overview</h4>
<div class="paragraph">
<p>Taxonomies are a way to group and structure data.</p>
</div>
<div class="paragraph">
<p>Styx taxonomies are a two layers grouping system.<br>
The taxonomy layer group the content declaring a specific data attribute, and the term layer group the contents in the taxonomy depending of the values set to that specific attribute.</p>
</div>
<div class="paragraph">
<p>A common example of taxonomy is tags, <code>tags</code> will be the taxonomy and <code>sports</code> or <code>technology</code> will be the terms.</p>
</div>
<div class="paragraph">
<p>Taxonomy are organized in the following structure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Taxonomy: Name of the grouping characteristic, for example <code>tags</code>.</p>
</li>
<li>
<p>Term: Groups in the taxonomy, for <code>tags</code> it will the values tags can take, for example <code>sports</code> or <code>technology</code>.</p>
</li>
<li>
<p>Values: Objects grouped by a taxonomy term, for example all the posts with the <code>technology</code> tag.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_taxonomy_data_structure"><a class="anchor" href="#_creating_a_taxonomy_data_structure"></a>7.7.2. Creating a taxonomy data structure</h4>
<div class="paragraph">
<p>A taxonomy data structure is created with the <code>mkTaxonomyData</code> function.<br>
This function take a set parameter with two required attributes <code>data</code> and <code>taxonomies</code>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>taxonomies</code></dt>
<dd>
<p>A list of taxonomy fields to look for into <code>data</code>.</p>
</dd>
<dt class="hdlist1"><code>data</code></dt>
<dd>
<p>The list of attribute sets (usually pages attribute sets) to where the <code>taxonomy</code> field will be looked for.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="title">Creating a taxonomy structure</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">  data.taxonomies = mkTaxonomyData {
                      data = pages.posts;
                      taxonomies = [ "tags" "categories" ];
                    };</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will generate a taxonomy data structure where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>tags</code> and <code>categories</code> are taxonomies.</p>
</li>
<li>
<p>terms would be all the values of <code>tags</code> or <code>categories</code> set in <code>pages.posts</code>.</p>
</li>
<li>
<p>values would be all the pages in the <code>pages.posts</code> declaring <code>tags</code> or <code>categories</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Then, the taxonomy related pages can be generated in the page section using the <code>mkTaxonomyPages</code> function.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This example use <code>pages</code> and not <code>data</code> attribute sets because data attribute sets do not have a <code>href</code> field and it is impossible to generate links to them.<br>
Using data attribute sets such as <code>data.posts</code> would make it impossible to generate pages from the taxonomy with <code>mkTaxonomyPages</code>.
</td>
</tr>
</table>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>The taxonomy data structure uses property lists, lists of attribute sets with a single key, for easier data manipulation.</p>
</div>
<div class="listingblock">
<div class="title">Taxonomy data structure</div>
<div class="content">
<pre>[
  {
    TAXONOMY1 = [
      { TERM1 = [ VALUE1 VALUE2 ... ]; }
      { TERM2 = [  ... ]; }
      ...
    ];
  }
  {
    TAXONOMY2 = [
      { TERM1 = [ VALUE1 VALUE2 ... ]; }
      { TERM2 = [  ... ]; }
      ...
    ];
  }
]</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_adding_taxonomy_to_data"><a class="anchor" href="#_adding_taxonomy_to_data"></a>7.7.3. Adding taxonomy to data</h4>
<div class="paragraph">
<p>Adding taxonomy fields to a content consists in adding a metadata attribute with taxonomy name containing a list of terms to it.</p>
</div>
<div class="listingblock">
<div class="title">Setting tags to a markdown file</div>
<div class="content">
<pre class="highlight"><code class="language-markdown" data-lang="markdown">{---
  tags = [ "foo" "bar" ];
---}

# Lorem ipsum

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean dapibus aliquet justo ac lacinia.</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Terms must be a list of strings.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Pages"><a class="anchor" href="#Pages"></a>8. Pages</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Pages refer to the pages declared in <code>site.nix</code>.</p>
</div>
<div class="paragraph">
<p>Pages are declared in a <code>pages</code> an attribute set. Every page or list of pages declared in this set will be generated.</p>
</div>
<div class="sect2">
<h3 id="_overview_2"><a class="anchor" href="#_overview_2"></a>8.1. Overview</h3>
<div class="paragraph">
<p>Pages get passed to the <code>generateFunction</code> that turn each page into a text file in the generated site.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Pages are usually generated as html documents, but any kind of text file can be generated from a page attribute set.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_the_page_attribute_set"><a class="anchor" href="#_the_page_attribute_set"></a>8.2. The page attribute set</h3>
<div class="paragraph">
<p>The page attribute set is an attribute set that must defines at least three attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>layout</code>: A function that take the <code>template</code> result as a parameter and return the source of the file to generate.</p>
</li>
<li>
<p><code>template</code>: A function that take the page attribute set as a parameter and returns an updated attribute set.</p>
</li>
<li>
<p><code>href</code>: The path of the page to generate.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is the strict minimum and most of templates will require extra attributes like <code>title</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="#_hello_world">Hello world!</a> contains an example of a simple page attribute set.</p>
</div>
<div class="listingblock">
<div class="title">Simple page attribute set</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">pages.index = {
  layout = template: "&lt;html&gt;&lt;body&gt;${template}&lt;/body&gt;&lt;/html&gt;";
  template = page: "&lt;h1&gt;Hello world!&lt;/h1&gt;";
  href = "index.html";
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>In a normal <code>site.nix</code>, the template would be an attribute from the <code>templates</code> set like <code>templates.generic.full</code>.</p>
</div>
<div class="paragraph">
<p>Page attribute sets are usually augmented by various attributes or merged with data sets to fit any needs.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>generateSite</code> evaluate <code>page.layout (page.template page)</code> and output the result in <code>page.href</code> for every page in its <code>pagesList</code> argument.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
As many pages tends to use the same layout, the <code>layout</code> attribute is usually set in one go to all templates in the "arguments preparation" section.<br>
Usually, only pages that use a different layout explicitly declares it in <code>pages</code>.<br>
The following examples will omit the <code>layout</code> like done in a normal <code>site.nix</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_simple_pages"><a class="anchor" href="#_simple_pages"></a>8.3. Simple pages</h3>
<div class="paragraph">
<p>Generating a simple page is trivial as it is just declaring the required attributes.</p>
</div>
<div class="listingblock">
<div class="title">Creating an error 404 page</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">pages.e404 = {
  href     = "404.html";
  template = templates.e404;
};</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Attribute set attributes should not start with a number. That is why the 404 template is <code>templates.e404</code> and not <code>templates.404</code>.<br>
Nix allow to use attributes starting with a number, but they must be called by using <code>"</code>. This is error prone and not used in styx.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_attaching_data_to_a_page"><a class="anchor" href="#_attaching_data_to_a_page"></a>8.4. Attaching data to a page</h3>
<div class="paragraph">
<p>Generating a page from an imported data is a very common case, and is easy to achieve.</p>
</div>
<div class="listingblock">
<div class="title">Attaching a data set to a page attribute set.</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">pages.about = {
  href = "about.html";
  template = templates.generic.full;
} // data.about;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>//</code> operator will merge the <code>data.about</code> data set in the <code>about</code> page set.</p>
</div>
</div>
<div class="sect2">
<h3 id="_bypassing_the_layout"><a class="anchor" href="#_bypassing_the_layout"></a>8.5. Bypassing the layout</h3>
<div class="paragraph">
<p>For pages which the template generate the full page source like for RSS feeds, applying a layout is not needed.<br>
In such cases, the <code>id</code> function, a function that return its parameter without changing it can be used as a layout.</p>
</div>
<div class="listingblock">
<div class="title">Using id as a layout</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">pages.feed = {
  href = "feed.xml";
  template = templates.feed;
  posts = take 10 posts;
  layout = id;
};</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>id</code> function is defined as <code>x: x</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_split_pages"><a class="anchor" href="#_split_pages"></a>8.6. Split pages</h3>
<div class="paragraph">
<p>Split pages refers to a list of data split though multiple similar pages.</p>
</div>
<div class="paragraph">
<p>A common example of split page is a blog archive page, the full list of blogs are split in many pages.</p>
</div>
<div class="paragraph">
<p>Split pages can be generated with the <code>mkSplit</code> or <code>mkSplitCustom</code> function.<br>
<code>mkSplit</code> being a simpler version of <code>mkSplitCustom</code> function that should fit most of needs.</p>
</div>
<div class="listingblock">
<div class="title">mkSplit example</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">pages.archives = mkSplit {
  baseHref = "archives";
  template = templates.archives;
  itemsPerPage = 5;
  data = pages.posts;
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will create a list of pages attribute sets with the following extra attributes:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>href</code></dt>
<dd>
<p>Set accordingly to <code>baseHref</code>. <code>baseHref.html</code> for the first page, and <code>baseHref-i.html</code> for the following pages where <code>i</code> is the index of the page.</p>
</dd>
<dt class="hdlist1"><code>items</code></dt>
<dd>
<p>The list of items for this page.</p>
</dd>
<dt class="hdlist1"><code>index</code></dt>
<dd>
<p>The position of this page in the list of split pages.</p>
</dd>
<dt class="hdlist1"><code>pages</code></dt>
<dd>
<p>The split pages lists, useful for generating a pagination.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For more complex splitting needs see the <a href="#lib.pages.mkSplitCustom">mkSplitCustom</a> function documentation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>mkSplit</code> only requires <code>baseHref</code>, <code>itemsPerPage</code> and <code>data</code> as parameters. Any extra parameter passed will be added to every split page attribute set.<br>
This is on purpose and is used in the previous example to set all the split pages template in the <code>mkSplit</code> declaration.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_multipages"><a class="anchor" href="#_multipages"></a>8.7. Multipages</h3>
<div class="paragraph">
<p>Multipages are page attribute sets that have a <code>subpages</code> attribute containing a list of subpages content.</p>
</div>
<div class="paragraph">
<p>Multipages are usually generated by importing <a href="#_multipage_data">Multipage data</a>.</p>
</div>
<div class="paragraph">
<p>Mulipage pages are referred as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>all</code>: The full subpages list.</p>
</li>
<li>
<p><code>head</code>: First page in the subpages list.</p>
</li>
<li>
<p><code>tail</code>: All the subpages, but the first.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_single_pages"><a class="anchor" href="#_single_pages"></a>8.7.1. Single pages</h4>
<div class="paragraph">
<p>Multipages can be generated with the <code>mkMultipages</code> function.</p>
</div>
<div class="listingblock">
<div class="title">mkMultipages example</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">pages.about = mkMultipages ({
  template = templates.generic.full-multipage;
  baseHref = "about";
} // data.about);</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>mkMultipages</code> only requires <code>baseHref</code> and <code>subpages</code> as parameters. Any extra parameter passed will be added to every generated attribute attribute set.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_pages_in_a_list"><a class="anchor" href="#_pages_in_a_list"></a>8.7.2. Pages in a list</h4>
<div class="paragraph">
<p>For a list of pages that might contains multipages, the problem get a little different.</p>
</div>
<div class="paragraph">
<p>If <code>mkMultipages</code> is naively used, every subpage will end up in the page list, and it is not what is expected most of the time.</p>
</div>
<div class="paragraph">
<p>If we have a list of posts, and some are multipages, we want the <code>pages.posts</code> list of pages to include single page posts and the first page of the any multipage post.<br>
That way, multipage post subpages will not end up in posts archives or in the RSS feed.</p>
</div>
<div class="paragraph">
<p>So for multipages in a list, the generation will be separated in two steps.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>First generate the page list with single page data and multipage first page data.</p>
</li>
<li>
<p>Generate the multipage subpages data.</p>
</li>
</ol>
</div>
<hr>
<div class="paragraph">
<p>First step, generate the page set list with single page data and multipage first page data.</p>
</div>
<div class="paragraph">
<p>This could be done using <code>mkMultipages</code> and filtering / mapping, but a <code>mkPageList</code> function is available and do exactly that.</p>
</div>
<div class="listingblock">
<div class="title">Generating the page list with multipage head pages</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">pages.posts = mkPageList {
  data = data.posts; <i class="conum" data-value="1"></i><b>(1)</b>
  multipageTemplate = templates.post.full-multipage; <i class="conum" data-value="2"></i><b>(2)</b>
  template = templates.post.full;
};</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>data</code> is a list of data attribute set to generate pages attribute set from.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>multipageTemplate</code> is the template that will be used for data set that have a <code>subpages</code> field.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>mkPageList</code> will loop through <code>data</code> and if it finds a multipage, render only the first page (head) attribute set setting its template to <code>multipageTemplate</code> template.</p>
</div>
<hr>
<div class="paragraph">
<p>Next step is to generate the <code>tail</code> of the multipages posts.</p>
</div>
<div class="paragraph">
<p><code>mkMultitail</code> is the function to generate page sets for the <code>tail</code> of multipages in a list of data sets.</p>
</div>
<div class="listingblock">
<div class="title">Generating the multipage posts tail</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">pages.multiPostsTail = mkMultiTail {
  data = data.posts;
  template = templates.post.full-multipage;
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is very similar to the <code>mkPageList</code> function but only tail pages sets are generated. As only tail pages are rendered, the template is directly set with the <code>template</code> attribute.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
It is possible to set a prefix to the generated <code>href</code> attribute of <code>mkPageList</code> and <code>mkMultiTail</code> function with the <code>hrefPrefix</code> argument.<br>
If the <code>baseHref</code> argument is set, it <strong>must</strong> be the same for the same data set, else the links between <code>head</code> and <code>tail</code> pages will be broken.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_taxonomy_pages"><a class="anchor" href="#_taxonomy_pages"></a>8.8. Taxonomy pages</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To see how to generate taxonomy data, refer to <a href="#_taxonomies">Taxonomies</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Taxonomies pages can be generated from a taxonomy data structure with the <code>mkTaxonomyPages</code> function.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">  taxonomies = mkTaxonomyPages {
    data = data.taxonomies;
    taxonomyTemplate = templates.taxonomy.full;
    termTemplate = templates.taxonomy.term.full;
  };</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>mkTaxonomyPages</code> function will create the following page attribute sets:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>TAXONOMY/index.html</code>, the taxonomy index page set for every taxonomy. A <code>terms</code> attribute will be added to the page attribute set containing all the taxonomy terms.</p>
</li>
<li>
<p><code>TAXONOMY/TERM/index.html</code>, the term index page set for every term in every taxonomy. A <code>values</code> attribute will be added to the page attribute set containing all the values that use the term.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If required <code>mkTaxonomyPages</code> generated pages <code>href</code> can be changed with the <code>taxonomyHrefFun</code> and the <code>termHrefFun</code>, for details see <a href="#lib.pages.mkTaxonomyPages">mkTaxonomyPages</a>.<br>
If any of these functions is changed, the templates should be updated accordingly.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_site_generation"><a class="anchor" href="#_site_generation"></a>9. Site Generation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Site generation is the final section of <code>site.nix</code>.</p>
</div>
<div class="paragraph">
<p>It mainly consists in a call to <code>generateSite</code>, and the preparation of its arguments.</p>
</div>
<div class="sect2">
<h3 id="_substitutions"><a class="anchor" href="#_substitutions"></a>9.1. Substitutions</h3>
<div class="paragraph">
<p>Subtitutions are a way to use some variables in markup files or static files.</p>
</div>
<div class="paragraph">
<p>Substitutions are a set that is passed to the <code>generateSite</code>. Any value of this set can be replaced will be replaced in text files that <code>generateSite</code> outputs.</p>
</div>
<div class="paragraph">
<p>To be replaced, the variable as to be surrouded by <code>@</code>, for example <code>@siteUrl@</code>.</p>
</div>
<div class="listingblock">
<div class="title">Simple substitution set</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">{
  siteUrl = conf.siteUrl;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Using a substitution in a markdown file</div>
<div class="content">
<pre class="highlight"><code class="language-markdown" data-lang="markdown">Learn more in the [Styx 0.1.0 Documentation](@siteUrl@/documentation-v0-1-0.html).</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Using a substitution in a css file</div>
<div class="content">
<pre class="highlight"><code class="language-css" data-lang="css">background: url(@siteUrl@/images/foo.png);</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Substitutions are specially useful for resolving in-site links with <code>conf.siteUrl</code>, but they can also be used with sass or less to externalize css variables in <code>conf.nix</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_special_files_2"><a class="anchor" href="#_special_files_2"></a>9.2. Special files</h3>
<div class="paragraph">
<p>Styx automatically convert <code>sass</code>, <code>scss</code> and <code>less</code> files to css during site generation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_hooks"><a class="anchor" href="#_hooks"></a>9.3. Hooks</h3>
<div class="paragraph">
<p><code>generateSite</code> provide two hooks to customize the site generation process:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>preGen</code>: A string or multiline string with shell commands to run before generating the site.</p>
</li>
<li>
<p><code>postGen</code>: A string or multiline string with shell commands to run after generating the site.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deployment"><a class="anchor" href="#_deployment"></a>10. Deployment</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_github_pages"><a class="anchor" href="#_github_pages"></a>10.1. GitHub pages</h3>
<div class="paragraph">
<p>Styx support basic deployment to GitHub pages.</p>
</div>
<div class="paragraph">
<p>This is a two step process:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>first by preparing the repository to deploy on GitHub pages. (<code>deploy --init-gh-pages</code>)</p>
</li>
<li>
<p>then by updating that branch. (<code>deploy --gh-pages</code>)</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_initialization"><a class="anchor" href="#_initialization"></a>10.1.1. Initialization</h4>
<div class="paragraph">
<p><code>styx deploy --init-gh-pages</code> command will prepare the repository for GitHub deployment. This command will do the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>create a <code>gh-pages</code> directory</p>
</li>
<li>
<p>add the <code>gh-pages</code> folder to <code>.gitignore</code></p>
</li>
<li>
<p>clone the repository in the <code>gh-pages</code> folder</p>
</li>
<li>
<p>create a new empty <code>gh-pages</code> branch in the <code>gh-pages</code> folder</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_update_the_gh_pages_branch"><a class="anchor" href="#_update_the_gh_pages_branch"></a>10.1.2. Update the gh-pages branch</h4>
<div class="paragraph">
<p><code>styx deploy --gh-pages</code> command will build the site, and update the <code>gh-pages</code> folder folder with the generated static site and commit it to the <code>gh-pages</code> branch.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_other"><a class="anchor" href="#_other"></a>10.2. Other</h3>
<div class="paragraph">
<p>Styx does not yet provide a universal deployment method, but <code>rsync</code> can be used to deploy a Styx site to a remote server via ssh.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_library"><a class="anchor" href="#_library"></a>11. Library</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The library contains various functions that are used through <code>site.nix</code> and templates.
The functions are grouped in namespaces, but are also all included in the top-level scope to be used in an easy way.</p>
</div>
<div class="sect2">
<h3 id="_themes_3"><a class="anchor" href="#_themes_3"></a>11.1. Themes</h3>
<div class="paragraph">
<p>This namespace contains functions related to themes.</p>
</div>
<hr>
<div class="sect3">
<h4 id="lib.themes.loadConf"><a class="anchor" href="#lib.themes.loadConf"></a>loadConf</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Load themes configuration.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Attribute set</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>themes</code>: A list of themes names to load configuration from.</p>
</li>
<li>
<p><code>themesDir</code>: Directory where the themes are stored.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>A configuration attribute set with the <code>theme</code> and <code>themes</code> attributes.<br>
<code>theme</code> is the merged themes configuration, and <code>themes.THEME</code> holds the per theme configuration.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">themesConf = lib.themes.loadConf { inherit themes themesDir; };</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.themes.loadFiles"><a class="anchor" href="#lib.themes.loadFiles"></a>loadFiles</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Load themes static files.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Attribute set</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>themes</code>: A list of themes names to load configuration from.</p>
</li>
<li>
<p><code>themesDir</code>: Directory where the themes are stored.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>A list of directory paths.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">files = lib.themes.loadFiles {
  inherit themes themesDir;
};</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.themes.loadTemplates"><a class="anchor" href="#lib.themes.loadTemplates"></a>loadTemplates</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Load themes templates.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Attribute Set</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>themes</code>: A list of themes names to load configuration from.</p>
</li>
<li>
<p><code>themesDir</code>: Directory where the themes are stored.</p>
</li>
<li>
<p><code>defaultEnvironment</code>: The default template environment.</p>
</li>
<li>
<p><code>customEnvironments</code>: (optional) A set which attributea are template paths and the values template environments.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>An attribute set containing all the themes template with their environment applied.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">templates = lib.themes.loadTemplates {
  inherit themes defaultEnvironment customEnvironments themesDir;
};</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_template"><a class="anchor" href="#_template"></a>11.2. Template</h3>
<div class="paragraph">
<p>The template namspace contains functions useful in templates.</p>
</div>
<hr>
<div class="sect3">
<h4 id="lib.template.htmlAttr"><a class="anchor" href="#lib.template.htmlAttr"></a>htmlAttr</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Create html tag attributes.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>attrName</code>: Tag attribute to generate.</p>
</li>
<li>
<p><code>value</code>: Value of the attribute to generate, can be a string or a list of strings.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>A string of the attribute.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">htmlAttr "class" [ "foo" "bar" ]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results in</div>
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">class="foo bar"</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.template.isExternalHref"><a class="anchor" href="#lib.template.isExternalHref"></a>isExternalHref</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Checks whether a strings starts with <code>http</code>.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>href</code>: The href to check.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p><code>true</code> if <code>href</code> starts with <code>http</code>, false if not.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">isExternalHref item.href</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.template.generatorMeta"><a class="anchor" href="#lib.template.generatorMeta"></a>generatorMeta</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Generate a meta generator tag for Styx.</p>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p><code>&lt;meta name="generator" content="Styx" /&gt;</code></p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">generatorMeta</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.template.mapTemplate"><a class="anchor" href="#lib.template.mapTemplate"></a>mapTemplate</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Map a template function to a list of items and returns the result as a string.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>templateFunction</code>: A template or a function that take a single argument and returns a string.</p>
</li>
<li>
<p><code>items</code>: A list of items to apply the template to.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>The result of the template applied to every item as a string.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">mapTemplate templates.post.list page.items</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>mapTemplate</code> can and is often used with functions that acts like a template.</p>
</div>
<div class="listingblock">
<div class="title">Using a function with mapTemplate</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">mapTemplate (i: "&lt;li&gt;${i}&lt;/li&gt;") [ "foo" "bar" ]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results in</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;li&gt;foo&lt;/li&gt;
&lt;li&gt;bar&lt;/li&gt;</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.template.mapTemplateWithIndex"><a class="anchor" href="#lib.template.mapTemplateWithIndex"></a>mapTemplateWithIndex</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Similar to <code>mapTemplate</code> but pass an parameter to the template function that corresponds to the index of the item.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>templateFunction</code>: A template or a function that take the index and the item and returns a string.</p>
</li>
<li>
<p><code>items</code>: A list of items to apply the template to.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>The result of the template applied to every item as a string.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">mapTemplateiWithIndex (index: item:
  "&lt;li&gt;${index} - ${item}&lt;/li&gt;"
) [ "foo" "bar" ]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results in</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;li&gt;1 - foo&lt;/li&gt;
&lt;li&gt;2 - bar&lt;/li&gt;</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.template.mod"><a class="anchor" href="#lib.template.mod"></a>mod</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Returns the modulo of a number.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>dividend</code>: The dividend of the modulo.</p>
</li>
<li>
<p><code>divisor</code>: The divisor of the modulo.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>The modulo.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">mod 3 2</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results in</div>
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">1</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.template.isEven"><a class="anchor" href="#lib.template.isEven"></a>isEven</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Check if a number is even.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>number</code>: The number to check.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p><code>true</code> if <code>number</code> is even, <code>false</code> if not.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">isEven 2</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results in</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">true</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.template.isOdd"><a class="anchor" href="#lib.template.isOdd"></a>isOdd</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Check if a number is odd.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>number</code>: The number to check.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p><code>true</code> if <code>number</code> is odd, <code>false</code> if not.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">isOdd 2</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results in</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">false</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.template.parseDate"><a class="anchor" href="#lib.template.parseDate"></a>parseDate</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Parse a date.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>date</code>: A date in the format <code>YYYY-MM-DD</code>, e.g. <code>2012-12-21</code>.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>An attribute set containing date parts.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">with (parseDate "2012-12-21"); "${D} ${b} ${Y}"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results in</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">21 Dec 2012</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><code>parseDate</code> returns a set with the following attributes:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>YYYY</code></dt>
<dd>
<p>The year in 4 digit format (2012).</p>
</dd>
<dt class="hdlist1"><code>YY</code></dt>
<dd>
<p>The year in 2 digit format (12).</p>
</dd>
<dt class="hdlist1"><code>Y</code></dt>
<dd>
<p>Alias to <code>YYYY</code>.</p>
</dd>
<dt class="hdlist1"><code>y</code></dt>
<dd>
<p>Alias to <code>YY</code>.</p>
</dd>
<dt class="hdlist1"><code>MM</code></dt>
<dd>
<p>The month in 2 digit format (12, 01).</p>
</dd>
<dt class="hdlist1"><code>M</code></dt>
<dd>
<p>The month number (12 ,1).</p>
</dd>
<dt class="hdlist1"><code>m</code></dt>
<dd>
<p>Alias to <code>MM</code>.</p>
</dd>
<dt class="hdlist1"><code>m-</code></dt>
<dd>
<p>Alias to <code>M</code>.</p>
</dd>
<dt class="hdlist1"><code>B</code></dt>
<dd>
<p>Month in text format (December, January).</p>
</dd>
<dt class="hdlist1"><code>b</code></dt>
<dd>
<p>Month in short text format (Dec, Jan).</p>
</dd>
<dt class="hdlist1"><code>DD</code></dt>
<dd>
<p>Day of the month in 2 digit format (01, 31).</p>
</dd>
<dt class="hdlist1"><code>D</code></dt>
<dd>
<p>Day of the month (1, 31).</p>
</dd>
<dt class="hdlist1"><code>d-</code></dt>
<dd>
<p>Alias to <code>D</code>.</p>
</dd>
</dl>
</div>
</div>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_data_2"><a class="anchor" href="#_data_2"></a>11.3. Data</h3>
<div class="paragraph">
<p>The data namespace contains functions related to the <code>data</code> set and data formats.</p>
</div>
<hr>
<div class="sect3">
<h4 id="lib.data.loadDir"><a class="anchor" href="#lib.data.loadDir"></a>loadDir</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Load a directory containing data that styx can handle.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Attribute Set</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>dir</code>: The directory as a nix path.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>A list of data sets.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">data.drafts = loadDir {
  dir = ./drafts;
  extraAttrs = { isDraft = true; };
});</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Any extra arguments to <code>loadDir</code> will be forwarded to every generated data set.</p>
</div>
<div class="listingblock">
<div class="title">Setting isDraft to every file in a folder</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">data.drafts = loadDir {
  dir = ./drafts;
  isDraft = true;
};</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>loadDir</code> will print a warning for every file in the directory it cannot import.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.data.loadFile"><a class="anchor" href="#lib.data.loadFile"></a>loadFile</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Load a file in a format that Styx can handle.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Attribute Set</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>dir</code>: The directory as a nix path.</p>
</li>
<li>
<p><code>file</code>: The file name to load as a string.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>The loaded file data set.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">data.about = loadFile {
  dir  = ./pages;
  file = "about.md";
};</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Any extra arguments to <code>loadFile</code> will be forwarded to the generated data set.</p>
</div>
<div class="listingblock">
<div class="title">Setting isDraft to a file</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">data.drafts = loadFile {
  dir = ./drafts;
  file = "file.md";
  isDraft = true;
};</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.data.asciidocToHtml"><a class="anchor" href="#lib.data.asciidocToHtml"></a>asciidocToHtml</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Convert an asciidoc string to html text.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>string</code>: A string in asciidoc format.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p><code>string</code> converted to html.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">asciidocToHtml "link:https://en.wikipedia.org/wiki/AsciiDoc[AsciiDoc] is fun!"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results in</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div class="paragraph"&gt;
&lt;p&gt;&lt;a href="https://en.wikipedia.org/wiki/AsciiDoc"&gt;AsciiDoc&lt;/a&gt; is fun!&lt;/p&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.data.mardownToHtml"><a class="anchor" href="#lib.data.mardownToHtml"></a>markdownToHtml</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Convert a markdown string to html text.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>string</code>: A string in markdown format.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p><code>string</code> converted to html.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">markdownToHtml "[Markdown](https://en.wikipedia.org/wiki/Markdown) is fun!"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results in</div>
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;p&gt;&lt;a href="https://en.wikipedia.org/wiki/Markdown"&gt;Markdown&lt;/a&gt; is fun!&lt;/p&gt;</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.data.mkTaxonomyData"><a class="anchor" href="#lib.data.mkTaxonomyData"></a>mkTaxonomyData</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Generate a taxonomy data structure.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Attribute Set</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>data</code>: A list of attribute sets to generate the taxonomy data structure from.</p>
</li>
<li>
<p><code>taxonomies</code>: A list of taxonomies to generate the taxonomy data.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>A taxonomy data structure as a property list.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">data.taxonomies.posts = mkTaxonomyData {
  data = pages.posts;
  taxonomies = [ "tags" "level" ];
};</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Taxonomies are treated in detail in the <a href="#_taxonomies">Taxonomies</a> section.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.data.sortTerms"><a class="anchor" href="#lib.data.sortTerms"></a>sortTerms</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Sort a list of taxonomy terms by the number of values they hold.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>terms</code>: A list of taxonomy terms to sort.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>The sorted list of terms.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">sortTerms terms</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.data.avluesNb"><a class="anchor" href="#lib.data.avluesNb"></a>valuesNb</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Return the number of values a taxonomy term holds.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>term</code>: A taxonomy term.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>The number of values the term holds.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">sortTerms terms</code></pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pages_2"><a class="anchor" href="#_pages_2"></a>11.4. Pages</h3>
<div class="paragraph">
<p>The pages namespace contains functions related to the <code>pages</code> set.</p>
</div>
<hr>
<div class="sect3">
<h4 id="lib.pages.mkSplit"><a class="anchor" href="#lib.pages.mkSplit"></a>mkSplit</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Generate a list of page attributes set by splitting a list of data attribute sets.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Attribute Set</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>baseHref</code>: The base <code>href</code> set to the pages set, the first page <code>href</code> is <code>baseHref.html</code>, following pages <code>href</code> is <code>baseHref-index.html</code> where index is the number of the page.</p>
</li>
<li>
<p><code>itemsPerPage</code>: The number of items per page set.</p>
</li>
<li>
<p><code>data</code>: The list of data attribute set to split between the pages.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>A list of <code>data</code> / <code>itemsPerPage</code> page attribute set with the <code>href</code> set accordingly to <code>baseHref</code>.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">pages.archives = mkSplit {
  baseHref = "archives";
  itemsPerPage = 10;
  data = pages.posts;
};</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Any extra arguments to <code>mkSplit</code> will be forwarded to every generated page set.</p>
</div>
<div class="listingblock">
<div class="title">Set a template with mkSplit</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">pages.archives = mkSplit {
  baseHref = "archives";
  itemsPerPage = 10;
  data = pages.posts;
  template = templates.archives;
};</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For details see the <a href="#_split_pages">Split pages</a> section.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.pages.mkSplitCustom"><a class="anchor" href="#lib.pages.mkSplitCustom"></a>mkSplitCustom</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>A more customizable version of <code>mkSplit</code>.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Attribute Set</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>data</code>: The list of data attribute set to split between the pages.</p>
</li>
<li>
<p><code>head</code>: The settings for the first splitted page.</p>
<div class="ulist">
<ul>
<li>
<p><code>itemsNb</code>: The number of items to display on the first page.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>tail</code>: Setting for the following pages.</p>
<div class="ulist">
<ul>
<li>
<p><code>itemsNb</code>: The number of items to display per page.</p>
</li>
<li>
<p><code>baseHref</code>: The base <code>href</code> set to the pages, the <code>href</code> is <code>baseHref-index.html</code> where index is the number of the page.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>A list of page attribute set according to the arguments.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">pages.archives = mkSplitCustom {
  head = {
    itemsNb = 5;
    template = templates.archives.first;
  };
  tail = {
    itemsNb = 5;
    template = templates.archives.next;
  };
  data = pages.posts;
};</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Any extra arguments to <code>mkSplit</code> will be forwarded to every generated page set.<br>
Any extra arguments to <code>head</code> will be forwarded to the first page set.<br>
Any extra arguments to <code>tail</code> will be forwarded to the rest of pages.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For details see the <a href="#_split_pages">Split pages</a> section.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.pages.mkMultipages"><a class="anchor" href="#lib.pages.mkMultipages"></a>mkMultipages</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Create the list of page set for multipages data set.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Attribute Set</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>subpages</code>: The list of subpages source.</p>
</li>
<li>
<p><code>baseHref</code>: The base <code>href</code> set to the pages set, the first page <code>href</code> is <code>baseHref.html</code>, following pages <code>href</code> is <code>baseHref-index.html</code> where index is the number of the page.</p>
</li>
<li>
<p><code>output</code>: <code>all</code>, <code>head</code> or <code>tail</code>. This select which pages set to generate.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>A list of page attribute set according to the arguments.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">pages.about = mkMultipages ({
  template = templates.generic.full-multipage;
  baseHref = "about";
} // data.about);</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Any extra arguments to <code>mkMultipages</code> will be forwarded to every page set.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For details see the <a href="#_multipages">Multipages</a> section.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.pages.mkPageList"><a class="anchor" href="#lib.pages.mkPageList"></a>mkPageList</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Generate a list of pages attribute sets from a list of data set, but generates only the first page of multipages data set. For a use case see <a href="#_multipages">Multipages</a>.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Attribute Set</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>data</code>: The list of data attribute set to use.</p>
</li>
<li>
<p><code>hrefPrefix</code> (optional): A prefix string to add to the generated page set <code>href</code>.</p>
</li>
<li>
<p><code>multipageTemplate</code>: The template used for multipage data sets.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>A list of page attribute set according to the arguments.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">pages.posts = mkPageList {
  data = data.posts;
  hrefPrefix = "posts/";
  template = templates.post.full;
  multipageTemplate = templates.post.full-multipage;
};</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Any extra arguments to <code>mkPageList</code> will be forwarded to every generated page set.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For details see the <a href="#_multipages">Multipages</a> section.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
For the same data set list, <code>baseHref</code> set in <code>mkPageList</code> and in <code>mkMultiTail</code> <strong>must</strong> be the same.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.pages.mkMultiTail"><a class="anchor" href="#lib.pages.mkMultiTail"></a>mkMultiTail</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Generate a list of multipages subpages tail page attribute sets from a list of data set. For a use case see <a href="#_multipages">Multipages</a>.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Attribute Set</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>data</code>: The list of data attribute set to use.</p>
</li>
<li>
<p><code>hrefPrefix</code> (optional): A prefix string to add to the generated page set <code>href</code>.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>A list of page attribute set according to the arguments.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">pages.postsMultiTail = mkMultiTail {
  data = data.posts;
  hrefPrefix = "posts/";
  template = templates.post.full-multipage;
};</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Any extra arguments to <code>mkMultiTail</code> will be forwarded to every generated page set.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For details see the <a href="#_multipages">Multipages</a> section.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
For the same data set list, <code>baseHref</code> set in <code>mkPageList</code> and in <code>mkMultiTail</code> <strong>must</strong> be the same.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.pages.mkTaxonomyPages"><a class="anchor" href="#lib.pages.mkTaxonomyPages"></a>mkTaxonomyPages</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Generate the taxonomy related pages for the <code>data</code> list of data sets.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Attribute Set</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>data</code>: The list of data attribute set to use.</p>
</li>
<li>
<p><code>taxonomyTemplate</code>: The template to use for taxonomies page sets.</p>
</li>
<li>
<p><code>termTemplate</code>: The template to use for terms page sets.</p>
</li>
<li>
<p><code>taxonomyHrefFun</code> (optional): A function to generate the <code>href</code> of the taxonomy page.</p>
</li>
<li>
<p><code>termHrefFun</code> (optional): A function to generate the <code>href</code> of the taxonomy term page.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>A list of page attribute set according to the arguments.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">pages.postTaxonomies = mkTaxonomyPages {
  data = data.taxonomies.posts;
  taxonomyTemplate = templates.taxonomy.full;
  termTemplate = templates.taxonomy.term.full;
};</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Default taxonomyHrefFun</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">taxonomy: "${taxonomy}/index.html"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Default termHrefFun</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">taxonomy: term: "${taxonomy}/${term}index.html"</code></pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Changing <code>taxonomyHrefFun</code> or <code>termHrefFun</code> will require to also update the taxonomy related template links.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For details see the <a href="#_taxonomies">Taxonomies</a> section.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.pages.setDefaultLayout"><a class="anchor" href="#lib.pages.setDefaultLayout"></a>setDefaultLayout</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Set a <code>layout</code> attribute to a page attribute set if does not have any set.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>layout</code>: The layout template.</p>
</li>
<li>
<p><code>page</code>: The page attribute set to set the <code>layout</code> to.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>Return a page attribute set with the <code>layout</code> attribute.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">setDefaultLayout pages.about templates.layout</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This function is mainly used during <code>generateSite</code> argument preparation.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_generation"><a class="anchor" href="#_generation"></a>11.5. Generation</h3>
<div class="paragraph">
<p>The generation namespace contains functions related to the site generation.</p>
</div>
<hr>
<div class="sect3">
<h4 id="lib.generation.generateSite"><a class="anchor" href="#lib.generation.generateSite"></a>generateSite</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Generate a static site.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Attribute Set</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>pagesList</code> (optional): A list of page attribute sets to generate.</p>
</li>
<li>
<p><code>files</code> (optional): A list of folders. All the contents of the folders in this list will be copied to the generated site root.</p>
</li>
<li>
<p><code>substitutions</code> (optional): A substitution set to apply on every generated text file.</p>
</li>
<li>
<p><code>preGen</code> (optional): A list of shell commands to run before the site is generated as a string or multiline string.</p>
</li>
<li>
<p><code>postGen</code> (optional): A list of shell commands to run after the site is generated as a string or multiline string.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>The generated static site.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">generateSite { pagesList = [ pages.index ]; }</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.generation.pagesToList"><a class="anchor" href="#lib.generation.pagesToList"></a>pagesToList</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Convert the <code>pages</code> attribute set to a list of pages attribute sets.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>pages</code>: The <code>pages</code> attribute set.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>A list of pages attribute sets.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">pagesList = pagesToList pages;</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_utils"><a class="anchor" href="#_utils"></a>11.6. Utils</h3>
<div class="paragraph">
<p>The utils namespace contains generic functions that do not fit in other namespaces.</p>
</div>
<hr>
<div class="sect3">
<h4 id="lib.utils.overrideConf"><a class="anchor" href="#lib.utils.overrideConf"></a>overrideConf</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Override the conf attribute set with another attribute set.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>conf</code>: The <code>conf</code> attribute set.</p>
</li>
<li>
<p><code>override</code>: The attribute set to override <code>conf</code> with.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>The attribute set with <code>conf</code> and <code>override</code> merged.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">overrideConf mergedConf args</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is similar to the nixpkgs <code>recursiveUpdate</code> function, with the only difference that keys that do not exist in <code>conf</code> are ingnored.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.utils.chunksOf"><a class="anchor" href="#lib.utils.chunksOf"></a>chunksOf</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Split a list in lists multiple lists of <code>n</code> items.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>n</code>: The number of items per list.</p>
</li>
<li>
<p><code>list</code>: the list to split.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>A list of lists.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">chunksOf 2 [ 1 2 3 4 5 ]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results in</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">[ [ 1 2 ] [ 3 4] [ 5 ] ]</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.utils.sortBy"><a class="anchor" href="#lib.utils.sortBy"></a>sortBy</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Sort a list of attribute sets by an attribute value.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>attribute</code>: The attribute to use for sorting.</p>
</li>
<li>
<p><code>order</code>: <code>asc</code> for ascding order, or <code>dsc</code> for descending order.</p>
</li>
<li>
<p><code>list</code>: the list of attribute sets to sort.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>The sorted list of attribute sets.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">sortBy "priority" "asc" [ { priority = 5; } { priority = 2; } ]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results in</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">[ { priority = 2; } { priority = 5; } ]</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_proplist"><a class="anchor" href="#_proplist"></a>11.7. Proplist</h3>
<div class="paragraph">
<p>The proplist namespace contains functions to manipulate property lists, list of attribute set with only one attribute.</p>
</div>
<div class="paragraph">
<p>Property lists are used in the taxonomy data structure.</p>
</div>
<div class="listingblock">
<div class="title">Example of a property list</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">[ { name = "Alice"; } { age = 26; } ]</code></pre>
</div>
</div>
<hr>
<div class="sect3">
<h4 id="lib.proplist.propValue"><a class="anchor" href="#lib.proplist.propValue"></a>propValue</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Get the value of a property.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>property</code>: A property.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>The value of the property.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">propValue { name = "Alice"; }</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results in</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">Alice</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.proplist.propKey"><a class="anchor" href="#lib.proplist.propKey"></a>propValue</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Get the key of a property.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>property</code>: A property.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>The value of the key.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">propValue { name = "Alice"; }</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results in</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">name</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.proplist.isDefined"><a class="anchor" href="#lib.proplist.isDefined"></a>isDefined</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Check if a property list has a property with a specific attribute.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>attribute</code>: The attribute name.</p>
</li>
<li>
<p><code>list</code>: The property list.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p><code>true</code> is the property exists, <code>false</code> if not.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">isDefined "name" [ { name = "Alice"; } { age = 26; } ]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results in</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">true</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.proplist.getValue"><a class="anchor" href="#lib.proplist.getValue"></a>getValue</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Get a value from in a property list from an attribute name.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>attribute</code>: The attribute name.</p>
</li>
<li>
<p><code>list</code>: The property list.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>The property value.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">getValue "name" [ { name = "Alice"; } { age = 26; } ]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results in</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">Alice</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<code>getValue</code> will trigger an error if there is no property with the <code>attribute</code> in the list.<br>
<code>isDefined</code> function should be used before <code>getValue</code> to be sure the list has the <code>attribute</code>.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.proplist.getProp"><a class="anchor" href="#lib.proplist.getProp"></a>getProp</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Get a property from a property list by the attribute name.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>attribute</code>: The attribute name.</p>
</li>
<li>
<p><code>list</code>: The property list.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>The property.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">getProp "name" [ { name = "Alice"; } { age = 26; } ]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results in</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">{ name = "Alice"; }</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<code>getProp</code> will trigger an error if there is no property with the <code>attribute</code> in the list.<br>
<code>isDefined</code> function should be used before <code>getProp</code> to be sure the list has the <code>attribute</code>.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.proplist.removeProp"><a class="anchor" href="#lib.proplist.removeProp"></a>removeProp</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Remove a property from a property list having a specific attribute name.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>attribute</code>: The attribute name.</p>
</li>
<li>
<p><code>list</code>: The property list.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>The property list with the property removed.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">removeProp "name" [ { name = "Alice"; } { age = 26; } ]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results in</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">{ age = 26; }</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<code>removeProp</code> will trigger an error if there is no property with the <code>attribute</code> in the list.<br>
<code>isDefined</code> function should be used before <code>removeProp</code> to be sure the list has the <code>attribute</code>.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.proplist.propFlatten"><a class="anchor" href="#lib.proplist.propFlatten"></a>propFlatten</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Flatten a property list where multiple attributes with the same attribute are defined. Works only with property lists where the value is a list.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>list</code>: The property list to flatten.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>The flattened property list.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">propFlatten [ { tags = [ "sports" "technology" ]; } { tags = [ "food" "trip" ]; } ]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results in</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">[ { tags = [ "sports" "technology" "food" "trip" ]; } ]</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.proplist.propMap"><a class="anchor" href="#lib.proplist.propMap"></a>propMap</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Map through a property list.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>f</code>: A function to apply to the property list.</p>
</li>
<li>
<p><code>list</code>: The property list to map through.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>A list..</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">propMap (p: v: "${p}: ${v}") [ { name = "Alice"; } { age = 26; } ]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results in</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">[ "name: Alice" "age: 26" ]</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_nixpkgs"><a class="anchor" href="#_nixpkgs"></a>11.8. nixpkgs</h3>
<div class="paragraph">
<p>The nixpkgs namespace contains the <a href="https://github.com/NixOS/nixpkgs">nixpkgs</a> library and the nix <a href="http://nixos.org/nix/manual/#ssec-builtins">builtins</a>.<br>
This library contains many useful functions.</p>
</div>
<div class="paragraph">
<p>This section will be present a few commonly used function from it.</p>
</div>
<hr>
<div class="sect3">
<h4 id="lib.nixpkgs.trace"><a class="anchor" href="#lib.nixpkgs.trace"></a>trace</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Display a variable value during site compilation.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>variable</code>: The variable to debug.</p>
</li>
<li>
<p><code>output</code>: The value to output.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p><code>output</code>.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="title">Debugging a variable in a template</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">${trace var ""}</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.nixpkgs.traceSeq"><a class="anchor" href="#lib.nixpkgs.traceSeq"></a>traceSeq</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Display a fully evaluated variable value during site compilation.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>variable</code>: The variable to debug.</p>
</li>
<li>
<p><code>output</code>: The value to output.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p><code>output</code>.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="title">Debugging a variable in a template</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">${traceSeq var ""}</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<code>traceSeq</code> can be dangerous when used on infinite or recursive data structures so it should be used with care.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.nixpkgs.map"><a class="anchor" href="#lib.nixpkgs.map"></a>map</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Apply a function to every element of a list.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>function</code>: Function to apply to list elements.</p>
</li>
<li>
<p><code>list</code>: List.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>The list with the function applied to every element.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">map (e: e * 2) [ 1 2 3 4 ]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results in</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">[ 2 4 6 8 ]</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Nix being a functional language recursion is the main way to loop trhough a a list.
</td>
</tr>
</table>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="lib.nixpkgs.filter"><a class="anchor" href="#lib.nixpkgs.filter"></a>filter</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>Filter a list.</p>
</dd>
<dt class="hdlist1">Parameter Type</dt>
<dd>
<p>Standard</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>function</code>: Function to filter the list, if the function returns <code>true</code> the element is kept, if <code>false</code> the element is removed.</p>
</li>
<li>
<p><code>list</code>: List.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Return</dt>
<dd>
<p>The filtered list.</p>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">filter (e: e &gt; 3) [ 1 2 3 4 5 6 ]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results in</div>
<div class="content">
<pre class="highlight"><code class="language-nix" data-lang="nix">[ 4 5 6 ]</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<hr>
<div class="paragraph">
<p>:sectnums</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_release_notes"><a class="anchor" href="#_release_notes"></a>Release Notes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_styx_0_3_0_2016_10_26"><a class="anchor" href="#_styx_0_3_0_2016_10_26"></a>Styx 0.3.0 - 2016/10/26</h3>
<div class="paragraph">
<p>Highlights:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#_themes">Themes as first class citizens</a></p>
</li>
<li>
<p><a href="https://github.com/styx-static/themes">New themes</a></p>
</li>
<li>
<p>Styx library is automatically bundled</p>
</li>
<li>
<p><a href="#_taxonomies">Taxonomies</a></p>
</li>
<li>
<p><a href="#library">New functions in library, new sub libraries</a></p>
</li>
<li>
<p><a href="#_asciidoc">AsciiDoc support</a></p>
</li>
<li>
<p><a href="#_multipages">Multipages</a></p>
</li>
<li>
<p>Easier updates</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This release brings many major breaking changes that make upgrading from 0.2.0 non trivial.<br>
Fortunately, the new features introduced in this release should make future upgrades easy.</p>
</div>
</div>
<div class="sect2">
<h3 id="_styx_0_2_0_2016_10_10"><a class="anchor" href="#_styx_0_2_0_2016_10_10"></a>Styx 0.2.0 - 2016/10/10</h3>
<div class="paragraph">
<p>Highlights:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Live preview mode for the cli command (<a href="#_live">Live</a>)</p>
</li>
<li>
<p>Introduction of themes (<a href="#_themes">Themes</a>)</p>
</li>
<li>
<p>Content substitutions (<a href="#_substitutions">Substitutions</a>)</p>
</li>
<li>
<p>Content metadata (<a href="#_metadata">Metadata</a>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>New features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>cli command</p>
</li>
<li>
<p>new <code>preview</code> subcommand to preview a site locally</p>
</li>
<li>
<p>new <code>live</code> subcommand to preview and automatically reload changes</p>
</li>
<li>
<p><code>serve</code> subcommands new flags:</p>
</li>
<li>
<p><code>--detach</code> to launch the server in a background process</p>
</li>
<li>
<p><code>--server-host</code> to specify the server listening hostname</p>
</li>
<li>
<p><code>--siteUrl</code> to override <code>conf.siteUrl</code></p>
</li>
<li>
<p>new <code>-target</code> flag to specify the Styx site folder</p>
</li>
<li>
<p>content substitutions (<a href="#_substitutions">Substitutions</a>)</p>
</li>
<li>
<p>themes (<a href="#_themes">Themes</a>)</p>
</li>
<li>
<p>metadata (<a href="#_metadata">Metadata</a>)</p>
</li>
<li>
<p>404 error page template</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Incompatible changes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>default.nix</code> was renamed to <code>site.nix</code></p>
</li>
<li>
<p><code>site.nix</code> <code>previewMode</code> was renamed to <code>renderDrafts</code></p>
</li>
<li>
<p>cli <code>--preview</code> flag has been renamed to <code>--drafts</code></p>
</li>
<li>
<p><code>lib.content</code>: <code>getPosts</code>, <code>getDrafts</code> and <code>parsePage</code> arguments have changed</p>
</li>
<li>
<p><code>lib.generation</code>: <code>generateSite</code> arguments have changed</p>
</li>
<li>
<p><code>lib.utils</code>: <code>loadTemplateWithEnv</code> function was removed</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Bug Fixes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>nix link in the default theme layout template</p>
</li>
<li>
<p><code>styx new</code> is working when called in empty folders</p>
</li>
<li>
<p>default theme archive title is not hardcoded</p>
</li>
<li>
<p>default them pagination is displayed only when there is more than one page</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This release bring many major changes that make updating from 0.1.0 non-trivial.</p>
</div>
<div class="paragraph">
<p>To update, it is recommended to generate a new site, create a new theme with customized templates and static files, and update <code>site.nix</code> accordingly.</p>
</div>
</div>
<div class="sect2">
<h3 id="_styx_0_1_0_2016_10_07"><a class="anchor" href="#_styx_0_1_0_2016_10_07"></a>Styx 0.1.0 - 2016/10/07</h3>
<div class="paragraph">
<p>Initial release of Styx.</p>
</div>
</div>
</div>
</div>
</div>
</body>
</html>